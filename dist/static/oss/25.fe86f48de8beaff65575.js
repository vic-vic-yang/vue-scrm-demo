webpackJsonp([25],{"5F3p":function(n,e,t){(n.exports=t("FZ+f")(!1)).push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},Bs45:function(n,e,t){var r=t("5F3p");"string"==typeof r&&(r=[[n.i,r,""]]),r.locals&&(n.exports=r.locals);t("rjj0")("71d24500",r,!0)},boed:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=t("5aCZ"),a=t("sF3O"),o=t("QbVN"),i=t("0xDb"),s={name:"groupEditor",components:{Tinymce:r.a,uploadPrizeAvatar:o.a},data:function(){return{action:this.$route.params.id?"modify":"add",groupFrm:{activity_id:this.$route.params.activityId,id:this.$route.params.id,time:[],stage_name:"默认",promotion_persons:""},frmRules:{time:[{required:!0,message:"请选择阶段时间"}],stage_name:[{required:!0,message:"请选择活动阶段"}],promotion_persons:[{required:!0,message:"请输入晋级人数"}]},matchModeOptions:[{value:"默认",label:"默认"},{value:"初赛",label:"初赛"},{value:"复赛",label:"复赛"},{value:"决赛",label:"决赛"}],pickerOptions:{disabledDate:function(n){return n.getTime()<Date.now()-864e5}}}},created:function(){"modify"===this.action&&this.getData()},methods:{getData:function(){var n=this;a.a.stage.get(this.groupFrm).then(function(e){n.groupFrm.time=[Object(i.c)(e.start_time),Object(i.c)(e.end_time)],n.groupFrm.stage_name=e.stage_name,n.groupFrm.promotion_persons=e.promotion_persons})},save:function(){var n=this;this.$refs.groupFrm.validate(function(e){e&&(n.groupFrm.start_time=n.groupFrm.time[0],n.groupFrm.end_time=n.groupFrm.time[1],("modify"===n.action?a.a.stage.edit(n.groupFrm):a.a.stage.add(n.groupFrm)).then(function(e){"modify"!==n.action?n.$confirm("添加阶段成功，是否开始添加任务？","确认信息",{distinguishCancelAndClose:!0,closeOnClickModal:!1,confirmButtonText:"是",cancelButtonText:"否"}).then(function(t){n.$router.replace({name:"voteNewStage",params:{stageId:e.data.id}})}).catch(function(e){n.$router.replace({name:"stageList",params:{id:n.groupFrm.activity_id}})}):n.$router.replace({name:"stageList",params:{id:n.groupFrm.activity_id}})}))})}}},m={render:function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",{staticClass:"app-container"},[t("el-form",{ref:"groupFrm",staticClass:"code-add__frm",attrs:{model:n.groupFrm,rules:n.frmRules,"label-width":"80px"}},[t("el-form-item",{attrs:{prop:"stage_name",label:"活动阶段"}},[t("el-select",{attrs:{placeholder:"请选择活动阶段"},model:{value:n.groupFrm.stage_name,callback:function(e){n.$set(n.groupFrm,"stage_name",e)},expression:"groupFrm.stage_name"}},n._l(n.matchModeOptions,function(n){return t("el-option",{key:n.value,attrs:{label:n.label,value:n.value}})}))],1),n._v(" "),t("el-form-item",{attrs:{prop:"time",label:"阶段时间"}},[t("el-date-picker",{attrs:{editable:!1,type:"datetimerange","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间","value-format":"yyyy-MM-dd HH:mm:ss",align:"left","picker-options":n.pickerOptions},model:{value:n.groupFrm.time,callback:function(e){n.$set(n.groupFrm,"time",e)},expression:"groupFrm.time"}})],1),n._v(" "),t("el-form-item",{attrs:{prop:"promotion_persons",label:"晋级人数"}},[t("el-input",{staticStyle:{width:"100px"},attrs:{name:"matchName",clearable:!0,placeholder:"晋级人数"},model:{value:n.groupFrm.promotion_persons,callback:function(e){n.$set(n.groupFrm,"promotion_persons",e)},expression:"groupFrm.promotion_persons"}}),n._v(" 人\n  ")],1),n._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(e){e.preventDefault(),e.stopPropagation(),n.save(e)}}},[n._v("保存")]),n._v(" "),t("el-button",{on:{click:function(e){n.$router.back()}}},[n._v("取消")])],1)],1)],1)},staticRenderFns:[]};var l=t("VU/8")(s,m,!1,function(n){t("Bs45")},"data-v-33eac653",null);e.default=l.exports}});