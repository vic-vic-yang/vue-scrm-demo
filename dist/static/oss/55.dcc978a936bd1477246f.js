webpackJsonp([55],{"51kt":function(n,e,t){(n.exports=t("FZ+f")(!1)).push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},k80t:function(n,e,t){"use strict";var a=t("gyMJ");e.a={list:function(n){return a.a.get("/integral/v1/lottery/rule-prizes",{params:n}).then(function(n){return n.data})},get:function(n){return a.a.get("/integral/v1/lottery/rule-prizes/"+n.id)},add:function(n){return a.a.post("/integral/v1/lottery/rule-prizes",n,{autoShowMessage:!0})},edit:function(n){return a.a.put("/integral/v1/lottery/rule-prizes/"+n.id,n,{autoShowMessage:!0,showMessageType:"put"})},del:function(n){return a.a.delete("/integral/v1/lottery/rule-prizes/"+n.id,{autoShowMessage:!0})},getLevel:function(){return a.a.get("/integral/v1/lottery/rule-prize/get-level")},getWinPercent:function(n){return a.a.get("/integral/v1/lottery/rule-prizes/"+n.id+"/rule/"+n.rule_id+"/win-percent/"+n.num)},getUnallocatedNum:function(n){return a.a.get("/integral/v1/lottery/rule-prizes/"+n.id+"/unallocated-num/"+n.rule_id)}}},"o/N9":function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=t("Dd8w"),i=t.n(a),r=t("YK4W"),l=t("k80t"),o=t("0xDb"),s={name:"rule_list",components:{customElTable:r.a},data:function(){return{rule_id:this.$route.query.rule_id,tableOptions:[{label:"编号",prop:"id",width:80},{label:"奖品等级",prop:"prize_level_name"},{label:"奖品名称",prop:"prize_name"},{label:"奖品数量",prop:"total_num"},{label:"已使用奖品数",prop:"use_num"},{label:"剩余奖品数",prop:"left_num"},{label:"中奖百分比",prop:"win_percent"},{label:"排序",prop:"sort"},{label:"创建时间",prop:"create_time",sortable:!0},{prop:"USER_ACTION",actions:["edit","del"]}],tableData:[],pageIndex:1,pageSize:20,totalCount:0,tabLoading:!0}},created:function(){this.getData()},methods:{getData:function(){var n=this;this.tabLoading=!0,l.a.list({rule_id:this.rule_id,page_index:this.pageIndex,page_size:this.pageSize}).then(function(e){n.tableData=(e.result||[]).map(function(n){return i()({},n,{create_time:1*n.create_time==0?"--":Object(o.c)(n.create_time)})}),n.totalCount=1*e.totalCount,n.tabLoading=!1})},createCommodity:function(){this.$router.push({name:"marketingLotteryPrizeCreate",query:{rule_id:this.rule_id}})},editHandler:function(n){this.$router.push({name:"marketingLotteryPrizeModify",params:{id:n.id},query:{rule_id:this.rule_id}})},deleteHandler:function(n){var e=this;this.$confirm("确认删除奖项 <b>"+n.prize_name+"</b> 吗？","删除",{dangerouslyUseHTMLString:!0,confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){l.a.del({id:n.id}).then(function(){e.$message({type:"success",message:"已删除奖项"+n.prize_name}),e.getData()})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},sizeChangeHandler:function(n){this.pageSize=n,this.pageIndex=1,this.getData()},pageChangeHandler:function(n){this.pageIndex=n,this.getData()}}},u={render:function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",{staticClass:"app-container"},[t("div",{staticClass:"control-group",staticStyle:{padding:"0 0 20px"}},[t("el-button",{attrs:{type:"primary"},on:{click:n.createCommodity}},[t("i",{staticClass:"fs-13 el-icon-plus mr-5"}),n._v("新增奖项\n    ")])],1),n._v(" "),t("custom-el-table",{directives:[{name:"loading",rawName:"v-loading",value:n.tabLoading,expression:"tabLoading"}],attrs:{tableData:n.tableData,tableOptions:n.tableOptions,total:n.totalCount},on:{edit:n.editHandler,delete:n.deleteHandler,"size-change":n.sizeChangeHandler,"page-change":n.pageChangeHandler},model:{value:n.pageIndex,callback:function(e){n.pageIndex=e},expression:"pageIndex"}})],1)},staticRenderFns:[]};var d=t("VU/8")(s,u,!1,function(n){t("vdEV")},"data-v-46417082",null);e.default=d.exports},vdEV:function(n,e,t){var a=t("51kt");"string"==typeof a&&(a=[[n.i,a,""]]),a.locals&&(n.exports=a.locals);t("rjj0")("7a86d976",a,!0)}});