webpackJsonp([72],{J0j7:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"\n.dlItem[data-v-d6f83c9c]{\r\n  display: -webkit-box;\r\n  display: -ms-flexbox;\r\n  display: flex;\r\n  width: 100%;\r\n  -webkit-box-orient: vertical;\r\n  -webkit-box-direction: normal;\r\n      -ms-flex-direction: column;\r\n          flex-direction: column;\r\n  -webkit-box-align: center;\r\n      -ms-flex-align: center;\r\n          align-items: center;\n}\n.dlImg[data-v-d6f83c9c]{\r\n  width: 450px;\r\n  height: auto;\r\n  margin: 10px 0;\n}\n.work-btn[data-v-d6f83c9c]{\r\n  width: 50%;\r\n  display: -webkit-box;\r\n  display: -ms-flexbox;\r\n  display: flex;\r\n  margin: 0 auto;\r\n  -webkit-box-pack: justify;\r\n      -ms-flex-pack: justify;\r\n          justify-content: space-between;\n}\r\n",""])},RBoW:function(t,e,a){var i=a("J0j7");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("46f11d1e",i,!0)},dI7K:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("Dd8w"),n=a.n(i),s=a("YK4W"),l=a("exRc"),r=a("M4fF"),o=a.n(r),c={name:"voteUser",components:{customElTable:s.a},data:function(){return{activityId:this.$route.params.id,ifUserDetails:!1,ifReason:!1,reason:"",auditId:null,userListQueryFrm:{name:"",cardNum:"",status:""},query:null,tableOptions:[{label:"编号",prop:"id",width:80},{label:"姓名",prop:"name"},{label:"性别",prop:"gender",width:100},{label:"身份证号",prop:"id_card"},{label:"身份证照片",prop:"identityImgs",width:450,options:{type:"html"}},{label:"状态",prop:"status_cn",width:120,options:{type:"tag",prop:"status"}},{prop:"USER_ACTION",actions:[{label:"审核",type:"detail",options:this.getStatusBtnInfo,disableds:this.ifDisabled},{label:"拉入黑名单",type:"blacklist"}]}],tableData:[],pageIndex:1,pageSize:20,totalCount:1,tabLoading:!0,dialogImg:!1,dlImg:[],userDetailInfo:{},matchTypeOptions:[{label:"未审核",value:"0"},{label:"已过审",value:"1"},{label:"未过审",value:"2"}]}},created:function(){this.getData()},methods:{getData:function(){var t=this,e=this.query||{};this.tabLoading=!0,l.a.examine(n()({pageIndex:this.pageIndex,pageSize:this.pageSize,activityId:this.activityId},e)).then(function(e){e.result.forEach(function(t){t.gender=t.gender?t.gender-0==1?"男":"女":"保密",t.status=t.status-0==2?0:t.status-0==1?1:2,t.black-0==1&&(t.status=2,t.status_cn="黑名单"),t.identityImgs=t.card_front&&t.card_back?'<div style="display:flex;justify-content: space-around"><img style="width:180px;height:120px" src=\''+t.card_front+"' /><img style=\"width:180px;height:120px\" src='"+t.card_back+"' /></div>":"暂无照片"}),t.tableData=e.result,t.totalCount=1*e.totalCount,t.tabLoading=!1}).catch(function(){t.tabLoading=!1})},searchUser:function(){this.query=o.a.cloneDeep(this.userListQueryFrm),this.pageIndex=1,this.getData()},actionHandler:function(t,e){var a=this;if("detail"===t)this.ifUserDetails=!0,this.auditId=e.id;else if("blacklist"===t){if(e.status-0==4)return;this.$confirm("确认将 "+e.name+" 拉入黑名单吗？","黑名单",{dangerouslyUseHTMLString:!0,confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){l.a.black(e.id).then(function(){a.getData(),a.$message({type:"info",message:"已拉黑"})})}).catch(function(){a.$message({type:"info",message:"已取消"})})}},getStatusBtnInfo:function(){return{btn:"primary",label:"审核"}},ifDisabled:function(t){return!!t&&(t.black-0==1||void 0)},workPass:function(t){1===t?this.submitReason(t):this.ifReason=!0},submitReason:function(t){var e=this,a={};a.status=t&&1===t?1:2,a.reason=t&&1===t?"":this.reason,l.a.audit(this.auditId,a).then(function(){e.ifUserDetails=!1,e.ifReason=!1,e.getData()})},sizeChangeHandler:function(t){this.pageSize=t,this.pageIndex=1,this.getData()},pageChangeHandler:function(t){this.pageIndex=t,this.getData()},tabCellClickHandler:function(t,e){if("identityImgs"===t){if(!e.card_front&&!e.card_back)return;this.dlImg[0]=e.card_front,this.dlImg[1]=e.card_back,this.dialogImg=!0}}}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"control-group"},[a("el-form",{attrs:{inline:!0,model:t.userListQueryFrm}},[a("el-form-item",{attrs:{label:"姓名"}},[a("el-input",{attrs:{placeholder:"姓名"},model:{value:t.userListQueryFrm.name,callback:function(e){t.$set(t.userListQueryFrm,"name",e)},expression:"userListQueryFrm.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"身份证号"}},[a("el-input",{attrs:{placeholder:"身份证号"},model:{value:t.userListQueryFrm.cardNum,callback:function(e){t.$set(t.userListQueryFrm,"cardNum",e)},expression:"userListQueryFrm.cardNum"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"状态"}},[a("el-select",{attrs:{placeholder:"全部",clearable:""},model:{value:t.userListQueryFrm.status,callback:function(e){t.$set(t.userListQueryFrm,"status",e)},expression:"userListQueryFrm.status"}},t._l(t.matchTypeOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.searchUser}},[t._v("查询")])],1)],1)],1),t._v(" "),a("custom-el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tabLoading,expression:"tabLoading"}],attrs:{tableData:t.tableData,tableOptions:t.tableOptions,total:t.totalCount},on:{action:t.actionHandler,"size-change":t.sizeChangeHandler,"page-change":t.pageChangeHandler,"cell-click":t.tabCellClickHandler},model:{value:t.pageIndex,callback:function(e){t.pageIndex=e},expression:"pageIndex"}}),t._v(" "),a("el-dialog",{attrs:{title:"查看",visible:t.dialogImg,width:"30%"},on:{"update:visible":function(e){t.dialogImg=e}}},[a("div",{staticClass:"dlItem"},[a("img",{staticClass:"dlImg",attrs:{src:t.dlImg[0],alt:"身份证"}}),t._v(" "),a("img",{staticClass:"dlImg",attrs:{src:t.dlImg[1],alt:"身份证"}})])]),t._v(" "),a("el-dialog",{attrs:{title:"选择审核状态为？",width:"30%",visible:t.ifUserDetails},on:{"update:visible":function(e){t.ifUserDetails=e}}},[a("el-dialog",{attrs:{width:"30%",title:"原因",visible:t.ifReason,"append-to-body":""},on:{"update:visible":function(e){t.ifReason=e}}},[a("el-input",{attrs:{placeholder:"请输入未过审原因"},model:{value:t.reason,callback:function(e){t.reason=e},expression:"reason"}}),t._v(" "),a("div",{staticClass:"work-btn",staticStyle:{"margin-top":"20px"}},[a("el-button",{staticStyle:{margin:"auto"},attrs:{type:"primary"},on:{click:t.submitReason}},[t._v("提交")])],1)],1),t._v(" "),a("div",{staticClass:"work-btn"},[a("el-button",{attrs:{type:"danger"},on:{click:function(e){t.workPass(2)}}},[t._v("审核未过")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.workPass(1)}}},[t._v("审核通过")])],1)],1)],1)},staticRenderFns:[]};var u=a("VU/8")(c,d,!1,function(t){a("RBoW")},"data-v-d6f83c9c",null);e.default=u.exports}});