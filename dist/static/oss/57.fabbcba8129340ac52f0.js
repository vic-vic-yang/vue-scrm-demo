webpackJsonp([57],{"/l2W":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("Dd8w"),r=n.n(a),o=n("7hml"),i={name:"commentCenter",components:{customElTable:n("YK4W").a},data:function(){return{tableData:[],pageIndex:1,pageSize:20,totalCount:0,tabLoading:!1,tableOptions:[{label:"序号",prop:"id"},{label:"奖品类型",prop:"typeZh"},{label:"奖品名称",prop:"name"},{label:"奖品价值",prop:"myworth"},{label:"奖品库存",prop:"store"},{label:"已发送数量",prop:"send_num",width:160},{label:"奖品总数量",prop:"total_num"},{label:"创建时间",prop:"create_time"},{prop:"USER_ACTION",actions:["edit",{type:"forbid",options:this.getStatusBtnInfo},"del"]}]}},created:function(){this.getData()},methods:{selectChange:function(){},configGift:function(t){this.$router.push({name:"giftconf"})},getData:function(){var t=this,e={page_size:this.pageSize,page_index:this.pageIndex};o.a.list(e).then(function(e){t.tableData=e.result.map(function(t){var e="";switch(t.type){case"6":return e="电子卡券奖品",r()({typeZh:e,total_num:Number(t.store)+Number(t.send_num),myworth:1*t.worth_type==2?t.worth_rand_min+"-"+t.worth_rand_max+"元":t.worth+"元"},t);case"5":return e="答题投票次数奖品",r()({typeZh:e,total_num:Number(t.store)+Number(t.send_num),myworth:1*t.worth_type==2?t.worth_rand_min+"-"+t.worth_rand_max+"次":t.worth+"次"},t);case"4":return e="答题次数奖品",r()({typeZh:e,total_num:Number(t.store)+Number(t.send_num),myworth:1*t.worth_type==2?t.worth_rand_min+"-"+t.worth_rand_max+"次":t.worth+"次"},t);case"3":return e="积分奖品",r()({typeZh:e,total_num:Number(t.store)+Number(t.send_num),myworth:1*t.worth_type==2?t.worth_rand_min+"-"+t.worth_rand_max+"积分":t.worth+"积分"},t);case"2":return e="红包奖品",r()({typeZh:e,total_num:Number(t.store)+Number(t.send_num),myworth:1*t.worth_type==2?t.worth_rand_min+"-"+t.worth_rand_max+"元":t.worth+"元"},t);case"1":return e="谢谢参与",r()({typeZh:e,total_num:Number(t.store)+Number(t.send_num),myworth:t.worth},t)}})}).catch(function(t){console.log(t)})},go_giftWays:function(){this.$router.push({name:"giftWays"})},sizeChangeHandler:function(t){this.pageSize=t,this.pageIndex=1,this.getData()},pageChangeHandler:function(t){this.pageIndex=t,this.getData()},del:function(t){var e=this;o.a.delete(t.id).then(function(t){1===t.status&&(e.$message({message:"删除成功",type:"success"}),e.getData())}).catch(function(t){e.$message.error("系统出错！")})},forbid:function(t,e){var n=this;console.log(t,e),"forbid"===t&&o.a.forbid(e.id,"1"===e.status?"2":"1").then(function(t){n.$message({message:"操作成功",type:"success"}),n.getData()})},getStatusBtnInfo:function(t){return t?1===1*t.status?{btn:"danger",label:"禁用"}:{btn:"primary",label:"启用"}:{btn:"danger",label:"禁用"}},edit:function(t){this.$router.push({name:"giftconf",query:{id:t.id}})}}},s={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"comment-wrapper app-container"},[n("div",{staticClass:"btns-wrapper"},[n("el-button",{attrs:{type:"primary"},on:{click:function(e){e.stopPropagation(),t.configGift(e)}}},[t._v("新增奖品")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(e){e.stopPropagation(),t.go_giftWays(e)}}},[t._v("发奖策略")])],1),t._v(" "),n("custom-el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tabLoading,expression:"tabLoading"}],attrs:{tableData:t.tableData,tableOptions:t.tableOptions,total:t.totalCount},on:{delete:t.del,action:t.forbid,edit:t.edit,"size-change":t.sizeChangeHandler,"page-change":t.pageChangeHandler},model:{value:t.pageIndex,callback:function(e){t.pageIndex=e},expression:"pageIndex"}})],1)},staticRenderFns:[]};var u=n("VU/8")(i,s,!1,function(t){n("kXZ4")},"data-v-025bb7a8",null);e.default=u.exports},"7hml":function(t,e,n){"use strict";var a=n("//Fk"),r=n.n(a),o=n("zL8q"),i=(n.n(o),n("gyMJ"));e.a={list:function(t){return i.a.get("/prizeCenter/v1/prize/prizes",{params:t}).then(function(t){return t.data})},add:function(t){return i.a.post("/prizeCenter/v1/prize/prizes",t,{headers:{"Content-Type":"application/x-www-form-urlencoded"},timeout:3e4}).then(function(t){return t.data})},edit:function(t,e){return i.a.put("/prizeCenter/v1/prize/prizes/"+t,e,{headers:{"Content-Type":"application/x-www-form-urlencoded"},timeout:3e4}).then(function(t){return t.data})},forbid:function(t,e){return i.a.put("/prizeCenter/v1/prize/prizes/"+t+"/status/"+e,{},{headers:{"Content-Type":"application/x-www-form-urlencoded"},timeout:3e4}).then(function(t){return t.data})},getOneById:function(t){return i.a.get("/prizeCenter/v1/prize/prizes/"+t).then(function(t){return t.data})},delete:function(t){return i.a.delete("/prizeCenter/v1/prize/prizes/"+t).then(function(t){return t.data})},upload:function(t,e){if(!e)return Object(o.Message)({message:"上传文件不能为空",type:"error",duration:3e3}),r.a.reject(!1);var n=new FormData;return n.append("prize_id",t),n.append("file",e),i.a.post("/prizeCenter/v1/prize/prize/import-card-number",n,{headers:{"Content-Type":"multipart/form-data"},timeout:3e4}).then(function(t){return 200===t.code?t.data:r.a.reject(t)})}}},JK7j:function(t,e,n){(t.exports=n("FZ+f")(!1)).push([t.i,"\n.btns-wrapper[data-v-025bb7a8] {\n  margin-bottom: 20px;\n}\n",""])},kXZ4:function(t,e,n){var a=n("JK7j");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);n("rjj0")("2742963c",a,!0)}});