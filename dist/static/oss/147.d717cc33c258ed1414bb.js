webpackJsonp([147],{oKzm:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("Dd8w"),n=a.n(r),i=a("YK4W"),l=a("9CDT"),o=a("0xDb"),s=a("M4fF"),u=a.n(s),c={name:"orderOverview",components:{customElTable:i.a},data:function(){return{orderQueryFrm:{search_type:1,search_input:"",goods_name:"",status:"",time:[]},tableOptions:[{label:"订单号",prop:"order_number"},{label:"商品",prop:"goods",options:{type:"html"}},{label:"单价/数量",prop:"price_num"},{label:"买家",prop:"user_info",options:{type:"html"}},{label:"下单时间",prop:"create_time",sortable:!0,width:105,className:"ph-6"},{label:"订单状态",prop:"status_name"},{label:"付款金额",prop:"pay_price"}],tableData:[],pageIndex:1,pageSize:20,totalCount:0,tabLoading:!0,conditionOptions:[{value:1,label:"订单号"},{value:2,label:"收货人姓名"},{value:3,label:"收货人手机号"},{value:4,label:"手机号后四位"}],conditionType:"order_number",statusOptions:[{value:0,label:"全部"},{value:1,label:"待付款"},{value:2,label:"待发货"},{value:3,label:"已发货"},{value:4,label:"已完成"}],pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},query:null}},created:function(){this.getData()},methods:{getData:function(){var e=this,t=this.query||{};this.tabLoading=!0,l.a.list(n()({page_index:this.pageIndex,page_size:this.pageSize},t)).then(function(t){e.tableData=(t.result||[]).map(function(e){var t=e.pic&&e.pic.length?e.pic[0]:null;return n()({},e,{goods:"<p>"+e.goods_name+"</p>"+(t?'<img width="120" height="120" src="'+t.file_path+'" />':""),price_num:e.active_price+"(元)/"+e.num+"件",user_info:e.user_name+"<br/>"+e.phone,create_time:1*e.create_time!=0?Object(o.c)(e.create_time):"--",status_name:e.status_name.status_name,pay_price:e.total_money+"(元)"})}),e.totalCount=1*t.totalCount,e.tabLoading=!1}).catch(function(){e.tabLoading=!1})},searchOrderList:function(){this.query=u.a.cloneDeep(this.orderQueryFrm);var e=this.query.time||[];this.$set(this.query,"start_time",e[0]||""),this.$set(this.query,"end_time",e[1]||""),this.$delete(this.query,"time"),this.pageIndex=1,this.getData()},sizeChangeHandler:function(e){this.pageSize=e,this.pageIndex=1,this.getData()},pageChangeHandler:function(e){this.pageIndex=e,this.getData()},searchTypeChange:function(){this.$set(this.orderQueryFrm,"search_input","")},resetForm:function(e){this.$refs[e].resetFields()}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"control-group"},[a("el-form",{ref:"orderQueryFrm",attrs:{inline:!0,model:e.orderQueryFrm}},[a("el-form-item",{attrs:{prop:"search_input"}},[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入内容"},model:{value:e.orderQueryFrm.search_input,callback:function(t){e.$set(e.orderQueryFrm,"search_input",t)},expression:"orderQueryFrm.search_input"}},[a("el-select",{staticStyle:{width:"126px"},attrs:{slot:"prepend",placeholder:"请选择"},on:{change:e.searchTypeChange},slot:"prepend",model:{value:e.orderQueryFrm.search_type,callback:function(t){e.$set(e.orderQueryFrm,"search_type",t)},expression:"orderQueryFrm.search_type"}},e._l(e.conditionOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),a("el-form-item",{attrs:{prop:"goods_name",label:"商品名称"}},[a("el-input",{attrs:{placeholder:"商品名称"},model:{value:e.orderQueryFrm.goods_name,callback:function(t){e.$set(e.orderQueryFrm,"goods_name",t)},expression:"orderQueryFrm.goods_name"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"status",label:"订单状态"}},[a("el-select",{attrs:{placeholder:"全部",clearable:""},model:{value:e.orderQueryFrm.status,callback:function(t){e.$set(e.orderQueryFrm,"status",t)},expression:"orderQueryFrm.status"}},e._l(e.statusOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{prop:"time",label:"下单时间"}},[a("el-date-picker",{attrs:{editable:!1,type:"datetimerange","picker-options":e.pickerOptions,"range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间","value-format":"yyyy-MM-dd HH:mm:ss",align:"right"},model:{value:e.orderQueryFrm.time,callback:function(t){e.$set(e.orderQueryFrm,"time",t)},expression:"orderQueryFrm.time"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.searchOrderList}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{icon:"el-icon-refresh"},on:{click:function(t){e.resetForm("orderQueryFrm")}}},[e._v("重置")])],1)],1)],1),e._v(" "),a("custom-el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tabLoading,expression:"tabLoading"}],attrs:{tableData:e.tableData,tableOptions:e.tableOptions,total:e.totalCount},on:{"size-change":e.sizeChangeHandler,"page-change":e.pageChangeHandler},model:{value:e.pageIndex,callback:function(t){e.pageIndex=t},expression:"pageIndex"}})],1)},staticRenderFns:[]},m=a("VU/8")(c,p,!1,null,null,null);t.default=m.exports}});