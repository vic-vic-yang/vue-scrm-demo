webpackJsonp([130],{"0q+G":function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"\n.work-btn[data-v-11bcddb2]{\r\n  width: 50%;\r\n  display: -webkit-box;\r\n  display: -ms-flexbox;\r\n  display: flex;\r\n  margin: 0 auto;\r\n  -webkit-box-pack: justify;\r\n      -ms-flex-pack: justify;\r\n          justify-content: space-between;\n}\r\n",""])},Jd4K:function(t,e,a){var n=a("0q+G");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a("rjj0")("17ea655a",n,!0)},N1Rf:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("Dd8w"),s=a.n(n),i=a("YK4W"),o=a("yaPy"),c=a("0xDb"),r=a("M4fF"),l=a.n(r),u={name:"contentAccount",components:{customElTable:i.a},data:function(){return{accountQueryFrm:{nickname:"",status:""},query:null,stateOptions:[{value:10,label:"已启用"},{value:0,label:"已禁用"}],tableOptions:[{label:"序号",prop:"id",width:120},{label:"账号名称",prop:"nickname"},{label:"账号",prop:"username"},{label:"账号角色",prop:"roles"},{label:"创建时间",prop:"created_at",sortable:!0,width:210,className:"ph-6"},{label:"状态",prop:"status_cn",width:120,options:{type:"tag",prop:"status"}},{prop:"USER_ACTION",actions:[{type:"editor",options:this.getTaskEditBtnInfo,disableds:this.ifDisabled},{type:"status",options:this.getStatusBtnInfo,disableds:this.ifDisabled},{type:"delete",options:this.getTaskDelBtnInfo,disableds:this.ifDisabled}]}],tableData:[],pageIndex:1,pageSize:20,totalCount:0,tabLoading:!0}},created:function(){this.getData()},methods:{getData:function(){var t=this,e=this.query||{};this.tabLoading=!0,o.a.account.list(s()({pageIndex:this.pageIndex,pageSize:this.pageSize},e)).then(function(e){e.result.forEach(function(t){t.created_at=1*t.created_at>0?Object(c.c)(t.created_at):"--",t.status_cn=t.status-0==0?"禁用":"启用",t.status=t.status-0==0?0:1}),t.tableData=e.result,t.totalCount=1*e.totalCount,t.tabLoading=!1}).catch(function(){t.tabLoading=!1})},searchAccount:function(){this.query=l.a.cloneDeep(this.accountQueryFrm),this.pageIndex=1,this.getData()},createAccount:function(){this.$router.push({name:"contentAddAccount"})},actionHandler:function(t,e){var a=this;"status"===t?this.$confirm("确认"+(1===e.status?"禁用":"启用")+"账号 <b>"+e.nickname+"</b> 吗？",1===e.status?"禁用":"启用",{dangerouslyUseHTMLString:!0,confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){o.a.account.status(e.id).then(function(){a.getData()})}).catch(function(){a.$message({type:"info",message:"已取消"})}):"editor"===t?this.$router.push({name:"contentEditorAccount",params:{id:e.id}}):"delete"===t&&this.$confirm("确认删除账号 <b>"+e.nickname+"</b> 吗？","删除",{dangerouslyUseHTMLString:!0,confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){o.a.account.del(e.id).then(function(){a.getData()})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},getTaskEditBtnInfo:function(){return{btn:"primary",label:"编辑"}},getTaskDelBtnInfo:function(){return{btn:"danger",label:"删除"}},getStatusBtnInfo:function(t){if(!t)return{btn:"danger",label:"禁用"};var e=1*t.status;return{btn:0===e?"primary":"danger",label:0===e?"启用":"禁用"}},ifDisabled:function(t){return!t||t.is_super},sizeChangeHandler:function(t){this.pageSize=t,this.pageIndex=1,this.getData()},pageChangeHandler:function(t){this.pageIndex=t,this.getData()}}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"control-group"},[a("el-form",{attrs:{inline:!0,model:t.accountQueryFrm}},[a("el-form-item",{attrs:{label:"账号名称"}},[a("el-input",{attrs:{placeholder:"账号名称"},model:{value:t.accountQueryFrm.nickname,callback:function(e){t.$set(t.accountQueryFrm,"nickname",e)},expression:"accountQueryFrm.nickname"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"状态"}},[a("el-select",{attrs:{placeholder:"全部",clearable:""},model:{value:t.accountQueryFrm.status,callback:function(e){t.$set(t.accountQueryFrm,"status",e)},expression:"accountQueryFrm.status"}},t._l(t.stateOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.searchAccount}},[t._v("查询")])],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.createAccount}},[a("i",{staticClass:"fs-13 el-icon-plus mr-5"}),t._v("添加账号\n        ")])],1)],1)],1),t._v(" "),a("custom-el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tabLoading,expression:"tabLoading"}],attrs:{tableData:t.tableData,tableOptions:t.tableOptions,total:t.totalCount},on:{action:t.actionHandler,"size-change":t.sizeChangeHandler,"page-change":t.pageChangeHandler},model:{value:t.pageIndex,callback:function(e){t.pageIndex=e},expression:"pageIndex"}})],1)},staticRenderFns:[]};var p=a("VU/8")(u,d,!1,function(t){a("Jd4K")},"data-v-11bcddb2",null);e.default=p.exports}});