webpackJsonp([45],{FEj1:function(e,t,a){var n=a("PPiL");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a("rjj0")("27d443af",n,!0)},PPiL:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"\n.btn-td-content-right{\r\n  padding: 4px 0 !important;\n}\r\n",""])},UrJi:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"\n.app-container[data-v-55ff8429] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  position: relative;\n  padding-bottom: 100px;\n}\n.app-container > div[data-v-55ff8429] {\n    width: 50%;\n}\n.app-container > div[data-v-55ff8429]:first-child {\n    border-right: 1px solid #eee;\n    width: 60%;\n    padding-right: 10px;\n    margin-right: 10px;\n}\n.app-container .right-top[data-v-55ff8429] {\n    margin: 0;\n}\n.app-container .btn-row[data-v-55ff8429] {\n    position: absolute;\n    bottom: 20px;\n    width: 100%;\n    text-align: center;\n}\n.app-container .btn-row .action-btn[data-v-55ff8429] {\n      width: 150px;\n}\n",""])},"lBG/":function(e,t,a){var n=a("UrJi");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a("rjj0")("39788951",n,!0)},tx8V:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("YK4W"),i=a("z2KI"),l=a("M4fF"),o=a.n(l),s={name:"contentUser",components:{customElTable:n.a},data:function(){return{searchKey:{type:"1",platform:"1",keyword:""},query:null,hasSelectData:[],mapSelectArr:[],tableOptions:[{label:"",prop:"SELECTION",align:"center"},{label:"名称",prop:"mp_name"},{label:"订阅平台",prop:"source_type"},{label:"订阅类型",prop:"content_type"}],tableData:[],pageIndex:1,pageSize:20,totalCount:0,tabLoading:!0}},created:function(){this.getData()},mounted:function(){document.querySelector(".right-top").style.height=document.querySelector(".control-group").offsetHeight+"px"},methods:{getData:function(){var e=this;this.tableData=[{id:1,name:"张三",nickname:"微信昵称",phone:"12312312321",address:"成都市武侯区天府二街"}],this.tabLoading=!0,i.a.unsubscribed({pageIndex:this.pageIndex,pageSize:this.pageSize,type:this.searchKey.type,source:this.searchKey.platform,name:this.searchKey.keyword.trim()}).then(function(t){e.dataChange(t.result),e.tableData=t.result,e.totalCount=1*t.totalCount,e.tabLoading=!1,e.$nextTick(function(){document.querySelector(".el-checkbox").style.display="none",t.result.forEach(function(t,a){-1!==e.mapSelectArr.indexOf(t.id)&&e.$children[1].$refs.customTable.toggleRowSelection(t)})})}).catch(function(){e.tabLoading=!1})},dataChange:function(e){e.forEach(function(e){switch(e.content_type){case"1":e.content_type="文章"}switch(e.source_type){case"1":e.source_type="微信公众号"}})},searchUser:function(){this.query=o.a.cloneDeep(this.searchKey),this.pageIndex=1,this.getData()},handleSelect:function(e){console.log(e);var t=this.mapSelectArr.indexOf(e.id);-1!==t?(this.hasSelectData.splice(t,1),this.mapSelectArr.splice(t,1)):(this.hasSelectData.push(e),this.mapSelectArr.push(e.id))},delRow:function(e,t){var a=this;this.$children[1].$refs.customTable.data.forEach(function(t){t.id===e.row.id&&a.$children[1].$refs.customTable.toggleRowSelection(t,!1)});var n=this.mapSelectArr.indexOf(e.row.id);this.hasSelectData.splice(n,1),this.mapSelectArr.splice(n,1)},sizeChangeHandler:function(e){this.pageSize=e,this.pageIndex=1,this.getData()},pageChangeHandler:function(e){this.pageIndex=e,this.getData()},confirm:function(){var e=this,t=[];this.hasSelectData.forEach(function(e){t.push(e.id)}),i.a.add({ids:t.join()}).then(function(t){t.success?(e.$message({type:"success",message:"添加成功!"}),e.$router.push("/contentPlatform/subscribe/index")):e.$message({type:"error",message:"添加失败!"})})},cancel:function(e){var t=this;this.$confirm("是否取消本次操作？","删除",{dangerouslyUseHTMLString:!0,confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$router.push("/contentPlatform/subscribe/index")})}}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",[a("div",{staticClass:"control-group"},[a("el-form",{attrs:{inline:!0,model:e.searchKey}},[a("el-form-item",{attrs:{label:"订阅类型"}},[a("el-select",{attrs:{placeholder:"订阅类型"},model:{value:e.searchKey.type,callback:function(t){e.$set(e.searchKey,"type",t)},expression:"searchKey.type"}},[a("el-option",{attrs:{label:"文章",value:"1"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"订阅平台"}},[a("el-select",{attrs:{placeholder:"订阅平台"},model:{value:e.searchKey.platform,callback:function(t){e.$set(e.searchKey,"platform",t)},expression:"searchKey.platform"}},[a("el-option",{attrs:{label:"微信公众号",value:"1"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"名称"}},[a("el-input",{attrs:{placeholder:"请输入名称"},model:{value:e.searchKey.keyword,callback:function(t){e.$set(e.searchKey,"keyword",t)},expression:"searchKey.keyword"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.searchUser}},[e._v("查询")])],1)],1)],1),e._v(" "),a("div",{staticClass:"left-table"},[a("custom-el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tabLoading,expression:"tabLoading"}],attrs:{tableNameTag:"leftTable",tableData:e.tableData,tableOptions:e.tableOptions,total:e.totalCount},on:{handleSelect:e.handleSelect,"size-change":e.sizeChangeHandler,"page-change":e.pageChangeHandler},model:{value:e.pageIndex,callback:function(t){e.pageIndex=t},expression:"pageIndex"}})],1)]),e._v(" "),a("div",{staticClass:"right-table"},[a("h3",{staticClass:"right-top"},[e._v("已选择（"+e._s(e.hasSelectData.length)+"）条")]),e._v(" "),a("div",[a("el-table",{attrs:{data:e.hasSelectData,border:""}},[a("el-table-column",{attrs:{prop:"mp_name",align:"center",label:"名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"source_type",align:"center",label:"订阅平台"}}),e._v(" "),a("el-table-column",{attrs:{prop:"content_type",align:"center",label:"订阅类型"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"80","class-name":"btn-td-content-right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(a){e.delRow(t,e.tableData)}}},[e._v("移除")])]}}])})],1)],1)]),e._v(" "),a("div",{staticClass:"btn-row"},[a("el-button",{staticClass:"action-btn",attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确定")]),e._v(" "),a("el-button",{staticClass:"action-btn",on:{click:e.cancel}},[e._v("取消")])],1)])},staticRenderFns:[]};var c=a("VU/8")(s,r,!1,function(e){a("lBG/"),a("FEj1")},"data-v-55ff8429",null);t.default=c.exports}});