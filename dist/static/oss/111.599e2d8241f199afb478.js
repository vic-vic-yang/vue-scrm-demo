webpackJsonp([111],{"+urj":function(t,a,e){(t.exports=e("FZ+f")(!1)).push([t.i,"\n.comment-text[data-v-3a629758]{\r\n  margin: 0;\n}\n.work-btn[data-v-3a629758]{\r\n  width: 40%;\r\n  display: -webkit-box;\r\n  display: -ms-flexbox;\r\n  display: flex;\r\n  margin: 30px auto 0;\r\n  -webkit-box-pack: justify;\r\n      -ms-flex-pack: justify;\r\n          justify-content: space-between;\n}\r\n",""])},5489:function(t,a,e){var n=e("+urj");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);e("rjj0")("372c3095",n,!0)},xY77:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=e("YK4W"),i=e("KEpt"),s={name:"voteComment",components:{customElTable:n.a},data:function(){return{id:this.$route.params.id,tableOptions:[{label:"编号",prop:"id",width:80},{label:"评论内容",prop:"content"},{label:"状态",prop:"status_cn",width:120,options:{type:"tag",prop:"platform_status"}},{label:"用户姓名",prop:"user_name",width:100},{label:"联系电话",prop:"phone_number",width:120},{prop:"USER_ACTION",actions:[{label:"审核",type:"detail",options:this.getStatusBtnInfo,disableds:this.ifDisabled},{label:"拉入黑名单",type:"blacklist"}]}],tableData:[],pageIndex:1,pageSize:20,totalCount:0,tabLoading:!0,ifComment:!1,commentId:"",userDetailInfo:{},matchTypeOptions:[{label:"未过审",value:"1"},{label:"已过审",value:"2"}]}},created:function(){this.getData()},methods:{getData:function(){var t=this;this.tabLoading=!0,i.a.commentList({pageIndex:this.pageIndex,pageSize:this.pageSize,compositionId:this.id}).then(function(a){a.result.forEach(function(t){t.platform_status=1,t.status-0==0?t.platform_status=3:t.status-0==2&&(t.platform_status=0),t.black-0==1&&(t.status_cn="黑名单",t.platform_status=2)}),t.tableData=a.result,t.totalCount=1*a.totalCount,t.tabLoading=!1}).catch(function(){t.tabLoading=!1})},actionHandler:function(t,a){var e=this;if("detail"===t)this.commentId=a.id,this.ifComment=!0;else if("blacklist"===t){if(a.status-0==4)return;this.$confirm("确认将 "+a.name+" 拉入黑名单吗？","黑名单",{dangerouslyUseHTMLString:!0,confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){i.a.commenBlack(a.id).then(function(){e.getData(),e.$message({type:"info",message:"已拉黑"})})}).catch(function(){e.$message({type:"info",message:"已取消"})})}},getStatusBtnInfo:function(t){return{btn:"primary",label:"审核"}},ifDisabled:function(t){return!!t&&(t.platform_status-0==2||void 0)},commentNoPass:function(){var t=this;i.a.commentStatus(this.commentId,{status:2}).then(function(){t.getData(),t.ifComment=!1})},commentPass:function(){var t=this;i.a.commentStatus(this.commentId,{status:1}).then(function(){t.getData(),t.ifComment=!1})},sizeChangeHandler:function(t){this.pageSize=t,this.pageIndex=1,this.getData()},pageChangeHandler:function(t){this.pageIndex=t,this.getData()}}},o={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"app-container"},[e("custom-el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tabLoading,expression:"tabLoading"}],attrs:{tableData:t.tableData,tableOptions:t.tableOptions,total:t.totalCount},on:{action:t.actionHandler,"size-change":t.sizeChangeHandler,"page-change":t.pageChangeHandler},model:{value:t.pageIndex,callback:function(a){t.pageIndex=a},expression:"pageIndex"}}),t._v(" "),e("el-dialog",{attrs:{title:"审核",width:"30%",visible:t.ifComment},on:{"update:visible":function(a){t.ifComment=a}}},[e("p",{staticClass:"comment-text"},[t._v("请选择是否审核通过！")]),t._v(" "),e("div",{staticClass:"work-btn"},[e("el-button",{attrs:{type:"danger"},on:{click:t.commentNoPass}},[t._v("审核未过")]),t._v(" "),e("el-button",{attrs:{type:"primary"},on:{click:t.commentPass}},[t._v("审核通过")])],1)])],1)},staticRenderFns:[]};var l=e("VU/8")(s,o,!1,function(t){e("5489")},"data-v-3a629758",null);a.default=l.exports}});