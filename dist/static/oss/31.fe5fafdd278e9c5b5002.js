webpackJsonp([31],{LRnb:function(n,e,r){(n.exports=r("FZ+f")(!1)).push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},Yxi9:function(n,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=r("woOf"),i=r.n(t),a=r("QbVN"),o=r("IIVU"),p=r("M4fF"),s=r.n(p),l={name:"prize_create",components:{uploadPrizeAvatar:a.a},data:function(){return{pageLoading:!0,action:this.$route.params.id?"modify":"add",prizeFrm:{id:this.$route.params.id||0,type:2,name:"",worth:"",cover:"",store:"",pic:[]},frmRules:{type:[{required:!0,message:"请选择奖品类型"}],name:[{required:!0,message:"请输入奖品名称"}],worth:[{required:!0,message:"请输入奖品价值"}],cover:[{required:!0,message:"请上传奖品图片"}],store:[{required:!0,message:"请输入奖品库存"}]},typeOptions:[{id:1,name:"谢谢参与"},{id:2,name:"积分"}],name:""}},created:function(){this.getDetail()},methods:{getDetail:function(){var n=this;if("add"===this.action)return this.pageLoading=!1;o.a.get({id:this.prizeFrm.id}).then(function(e){n.prizeFrm=s.a.assign({},n.prizeFrm,e.data),n.prizeFrm.cover=e.data.pic[0].file_path,n.pageLoading=!1}).catch(function(){n.pageLoading=!1})},changeType:function(){1===this.prizeFrm.type?this.prizeFrm.name="谢谢参与":this.prizeFrm.name=""},uploadSuccess:function(n){this.prizeFrm.pic=[],this.prizeFrm.pic.push(n)},save:function(){var n=this;this.$refs.prizeFrm.validate(function(e){if(e){var r=i()({},n.prizeFrm),t=null;r.pic=r.pic.map(function(n){return n.id}).join(","),1*r.type==1&&(t={id:(p=r).id,name:p.name,type:p.type,pic:p.pic,store:p.store}),t={id:(a=r).id,name:a.name,type:a.type,pic:a.pic,worth:a.worth,store:a.store},("modify"===n.action?o.a.edit(t):o.a.add(t)).then(function(){n.$router.back()})}var a,p})}}},c={render:function(){var n=this,e=n.$createElement,r=n._self._c||e;return r("div",{directives:[{name:"loading",rawName:"v-loading",value:n.pageLoading,expression:"pageLoading"}],staticClass:"app-container"},[r("el-form",{ref:"prizeFrm",staticClass:"activity-edit__form",attrs:{model:n.prizeFrm,rules:n.frmRules,"label-width":"140px"}},[r("el-form-item",{attrs:{prop:"type",label:"奖品类型"}},[r("el-select",{attrs:{clearable:"",placeholder:"请选择奖品类型"},on:{change:n.changeType},model:{value:n.prizeFrm.type,callback:function(e){n.$set(n.prizeFrm,"type",e)},expression:"prizeFrm.type"}},n._l(n.typeOptions,function(n){return r("el-option",{key:n.id,attrs:{label:n.name,value:n.id}})}))],1),n._v(" "),r("el-form-item",{attrs:{prop:"name",label:"奖品名称"}},[r("el-input",{attrs:{disabled:1==n.prizeFrm.type,placeholder:"请输入奖品名称"},model:{value:n.prizeFrm.name,callback:function(e){n.$set(n.prizeFrm,"name",e)},expression:"prizeFrm.name"}})],1),n._v(" "),2==n.prizeFrm.type?r("el-form-item",{attrs:{prop:"worth",label:"奖品价值"}},[r("el-input-number",{attrs:{min:0,placeholder:"请输入奖品价值",name:"worth"},model:{value:n.prizeFrm.worth,callback:function(e){n.$set(n.prizeFrm,"worth",e)},expression:"prizeFrm.worth"}}),n._v(" "),r("span",{staticClass:"ml-5 text-666"},[n._v("积分")])],1):n._e(),n._v(" "),r("el-form-item",{attrs:{prop:"cover",label:"奖品图片"}},[r("upload-prize-avatar",{on:{success:n.uploadSuccess},model:{value:n.prizeFrm.cover,callback:function(e){n.$set(n.prizeFrm,"cover",e)},expression:"prizeFrm.cover"}})],1),n._v(" "),r("el-form-item",{attrs:{prop:"store",label:"奖品库存"}},[r("el-input-number",{attrs:{min:0,placeholder:"请输入奖品库存",name:"store"},model:{value:n.prizeFrm.store,callback:function(e){n.$set(n.prizeFrm,"store",e)},expression:"prizeFrm.store"}})],1),n._v(" "),r("el-form-item",[r("el-button",{on:{click:function(e){e.preventDefault(),e.stopPropagation(),n.$router.back()}}},[n._v("取消")]),n._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:function(e){e.preventDefault(),e.stopPropagation(),n.save(e)}}},[n._v("保存")])],1)],1)],1)},staticRenderFns:[]};var m=r("VU/8")(l,c,!1,function(n){r("zc5G")},"data-v-173f9c1e",null);e.default=m.exports},zc5G:function(n,e,r){var t=r("LRnb");"string"==typeof t&&(t=[[n.i,t,""]]),t.locals&&(n.exports=t.locals);r("rjj0")("4f234722",t,!0)}});