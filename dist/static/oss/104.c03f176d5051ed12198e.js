webpackJsonp([104],{PfBo:function(n,t,e){(n.exports=e("FZ+f")(!1)).push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},fYT0:function(n,t,e){var a=e("PfBo");"string"==typeof a&&(a=[[n.i,a,""]]),a.locals&&(n.exports=a.locals);e("rjj0")("6c68fe0e",a,!0)},"jV/H":function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("Dd8w"),i=e.n(a),s=e("YK4W"),o=e("IIVU"),r=e("0xDb"),l={name:"prize_list",components:{customElTable:s.a},data:function(){return{tableOptions:[{label:"编号",prop:"id",width:80},{label:"奖品名称",prop:"name",width:300},{label:"类型",prop:"type_name"},{label:"奖品价值",prop:"worth"},{label:"总数",prop:"total_num"},{label:"库存数",prop:"store"},{label:"未分配数",prop:"unallocated_num"},{label:"创建时间",prop:"create_time",sortable:!0},{prop:"USER_ACTION",actions:["edit",{type:"status",options:this.getStatusBtnInfo},"del"]}],tableData:[],pageIndex:1,pageSize:20,totalCount:0,tabLoading:!0}},created:function(){this.getData()},methods:{getData:function(){var n=this;this.tabLoading=!0,o.a.list({page_index:this.pageIndex,page_size:this.pageSize}).then(function(t){n.tableData=(t.result||[]).map(function(n){return i()({},n,{type_name:1*n.type==1?"谢谢参与":"积分",create_time:1*n.create_time==0?"--":Object(r.c)(n.create_time)})}),n.totalCount=1*t.totalCount,n.tabLoading=!1})},createPrize:function(){this.$router.push({name:"marketingPrizeCreate"})},editHandler:function(n){this.$router.push({name:"marketingPrizeModify",params:{id:n.id}})},deleteHandler:function(n){var t=this;this.$confirm("确认删除奖品 <b>"+n.name+"</b> 吗？","删除",{dangerouslyUseHTMLString:!0,confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){o.a.del({id:n.id}).then(function(){t.$message({type:"success",message:"已删除奖品"+n.name}),t.getData()})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},actionHandler:function(n,t){var e=this;if("status"===n){var a=this.getStatusBtnInfo(t).label;this.$confirm("确认立即"+a+"奖品 <b>"+t.name+"</b> 吗？",a,{dangerouslyUseHTMLString:!0,confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){o.a.status({id:t.id,status:1*t.status==1?"2":"1"}).then(function(){e.getData()})}).catch(function(){e.$message({type:"info",message:"已取消"+a})})}},sizeChangeHandler:function(n){this.pageSize=n,this.pageIndex=1,this.getData()},pageChangeHandler:function(n){this.pageIndex=n,this.getData()},getStatusBtnInfo:function(n){if(!n)return{btn:"danger",label:"禁用"};var t=1*n.status;return 3!==t&&(1===t?{btn:"danger",label:"禁用"}:{btn:"primary",label:"启用"})}}},c={render:function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",{staticClass:"app-container"},[e("div",{staticClass:"app-container"},[e("div",{staticClass:"control-group",staticStyle:{padding:"0 0 20px"}},[e("el-button",{attrs:{type:"primary"},on:{click:n.createPrize}},[e("i",{staticClass:"fs-13 el-icon-plus mr-5"}),n._v("新增奖品\n      ")])],1),n._v(" "),e("custom-el-table",{directives:[{name:"loading",rawName:"v-loading",value:n.tabLoading,expression:"tabLoading"}],attrs:{tableData:n.tableData,tableOptions:n.tableOptions,total:n.totalCount},on:{edit:n.editHandler,delete:n.deleteHandler,action:n.actionHandler,"size-change":n.sizeChangeHandler,"page-change":n.pageChangeHandler},model:{value:n.pageIndex,callback:function(t){n.pageIndex=t},expression:"pageIndex"}})],1)])},staticRenderFns:[]};var p=e("VU/8")(l,c,!1,function(n){e("fYT0")},"data-v-4d4a582a",null);t.default=p.exports}});