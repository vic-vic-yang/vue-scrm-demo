webpackJsonp([60],{drFU:function(n,e,t){(n.exports=t("FZ+f")(!1)).push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},eIGe:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=t("Dd8w"),o=t.n(a),s=t("YK4W"),l=t("tWQL"),i=t("0xDb"),r=t("M4fF"),u=t.n(r),m={name:"commodityList",components:{customElTable:s.a},data:function(){return{tableOptions:[{label:"编号",prop:"id",width:80},{label:"商品名称",prop:"name"},{label:"商品价格",prop:"price"},{label:"访问量",prop:"goods_view_all_and_user",options:{type:"html"}},{label:"库存",prop:"total_num"},{label:"总销量",prop:"sell_num"},{label:"创建时间",prop:"create_time",sortable:!0,width:105,className:"ph-6"},{label:"商品状态",prop:"status_name",width:120},{prop:"USER_ACTION",actions:[{type:"status",options:this.getStatusBtnInfo},"edit","del"]}],tableData:[],pageIndex:1,pageSize:20,totalCount:0,tabLoading:!0,commodityQueryFrm:{name:"",type:0,status:0,sell_num:[]},query:null,commodityTypeOptions:[{label:"全部",value:0},{label:"实物",value:1},{label:"电子卡卷",value:2}],statusOptions:[{label:"全部",value:0},{label:"出售中",value:1},{label:"已售罄",value:2},{label:"仓库中",value:3}]}},created:function(){this.getData()},methods:{getData:function(){var n=this,e=this.query||{};this.tabLoading=!0,l.a.list(o()({page_index:this.pageIndex,page_size:this.pageSize},e)).then(function(e){n.tableData=(e.result||[]).map(function(n){return o()({},n,{total_num:1*n.total_num-1*n.sell_num,status_name:n.sell_status_info.sell_status_name,create_time:1*n.create_time!=0?Object(i.c)(n.create_time):"--",goods_view_all_and_user:"访客数："+n.goods_view_user+"<br>浏览量："+n.goods_view_all})}),n.totalCount=1*e.totalCount,n.tabLoading=!1})},searchCommodityList:function(){this.query=u.a.cloneDeep(this.commodityQueryFrm);var n=this.query.sell_num||[];this.$set(this.query,"sell_num_min",n[0]),this.$set(this.query,"sell_num_max",n[1]),this.pageIndex=1,this.getData()},createCommodity:function(){this.$router.push({name:"fightGroupCommodityCreate"})},editHandler:function(n){this.$router.push({name:"fightGroupCommodityModify",params:{id:n.id}})},deleteHandler:function(n){var e=this;this.$confirm("确认删除商品 <b>"+n.name+"</b> 吗？","删除",{dangerouslyUseHTMLString:!0,confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){l.a.del(n).then(function(){e.getData()})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},actionHandler:function(n,e){var t=this;if("status"===n){var a=this.getStatusBtnInfo(e).label;this.$confirm("确认立即"+a+"商品 <b>"+e.name+"</b> 吗？",a,{dangerouslyUseHTMLString:!0,confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){l.a.status(e).then(function(){t.getData()})}).catch(function(){t.$message({type:"info",message:"已取消"+a})})}},sizeChangeHandler:function(n){this.pageSize=n,this.pageIndex=1,this.getData()},pageChangeHandler:function(n){this.pageIndex=n,this.getData()},getStatusBtnInfo:function(n){if(!n)return{btn:"danger",label:"下架"};var e=1*n.sell_status_info.up_down_status;return 3!==e&&(2===e?{btn:"danger",label:"下架"}:{btn:"primary",label:"上架"})},resetForm:function(n){this.$refs[n].resetFields()}}},c={render:function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",{staticClass:"app-container"},[t("div",{staticClass:"control-group"},[t("el-form",{ref:"commodityQueryFrm",attrs:{inline:!0,model:n.commodityQueryFrm}},[t("el-form-item",{attrs:{prop:"name",label:"商品名"}},[t("el-input",{attrs:{placeholder:"商品名"},model:{value:n.commodityQueryFrm.name,callback:function(e){n.$set(n.commodityQueryFrm,"name",e)},expression:"commodityQueryFrm.name"}})],1),n._v(" "),t("el-form-item",{attrs:{prop:"type",label:"商品类型"}},[t("el-select",{attrs:{placeholder:"全部",clearable:""},model:{value:n.commodityQueryFrm.type,callback:function(e){n.$set(n.commodityQueryFrm,"type",e)},expression:"commodityQueryFrm.type"}},n._l(n.commodityTypeOptions,function(n){return t("el-option",{key:n.value,attrs:{label:n.label,value:n.value}})}))],1),n._v(" "),t("el-form-item",{attrs:{prop:"status",label:"商品状态"}},[t("el-select",{attrs:{placeholder:"全部",clearable:""},model:{value:n.commodityQueryFrm.status,callback:function(e){n.$set(n.commodityQueryFrm,"status",e)},expression:"commodityQueryFrm.status"}},n._l(n.statusOptions,function(n){return t("el-option",{key:n.value,attrs:{label:n.label,value:n.value}})}))],1),n._v(" "),t("el-form-item",{attrs:{prop:"sell_num",label:"总销售"}},[t("el-input",{staticStyle:{width:"80px"},model:{value:n.commodityQueryFrm.sell_num[0],callback:function(e){n.$set(n.commodityQueryFrm.sell_num,0,n._n(e))},expression:"commodityQueryFrm.sell_num[0]"}}),n._v(" "),t("span",{staticClass:"mh-5"},[n._v("-")]),n._v(" "),t("el-input",{staticStyle:{width:"80px"},model:{value:n.commodityQueryFrm.sell_num[1],callback:function(e){n.$set(n.commodityQueryFrm.sell_num,1,n._n(e))},expression:"commodityQueryFrm.sell_num[1]"}})],1),n._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:n.searchCommodityList}},[n._v("查询")]),n._v(" "),t("el-button",{attrs:{icon:"el-icon-refresh"},on:{click:function(e){n.resetForm("commodityQueryFrm")}}},[n._v("重置")])],1),n._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:n.createCommodity}},[t("i",{staticClass:"fs-13 el-icon-plus mr-5"}),n._v("发布商品\n        ")])],1)],1)],1),n._v(" "),t("custom-el-table",{directives:[{name:"loading",rawName:"v-loading",value:n.tabLoading,expression:"tabLoading"}],attrs:{tableData:n.tableData,tableOptions:n.tableOptions,total:n.totalCount},on:{edit:n.editHandler,delete:n.deleteHandler,action:n.actionHandler,"size-change":n.sizeChangeHandler,"page-change":n.pageChangeHandler},model:{value:n.pageIndex,callback:function(e){n.pageIndex=e},expression:"pageIndex"}})],1)},staticRenderFns:[]};var d=t("VU/8")(m,c,!1,function(n){t("xXV4")},"data-v-46af1e45",null);e.default=d.exports},tWQL:function(n,e,t){"use strict";var a=t("gyMJ");e.a={list:function(n){return a.a.get("/groupBuy/v1/goods/goods/get-list",{params:n}).then(function(n){return n.data})},del:function(n){return a.a.delete("/groupBuy/v1/goods/goods/del",{data:{id:n.id},autoShowMessage:!0})},status:function(n){return a.a.post("/groupBuy/v1/goods/goods/sell-status",{id:n.id,status:1*!(1*n.sell_status)},{autoShowMessage:!0,showMessageType:"put"})},get:function(n){return a.a.get("/groupBuy/v1/goods/goods/get-one?id="+n).then(function(n){return n.data})},add:function(n){return a.a.post("/groupBuy/v1/goods/goods/add",n,{autoShowMessage:!0})},edit:function(n){return a.a.post("/groupBuy/v1/goods/goods/edit",n,{autoShowMessage:!0})}}},xXV4:function(n,e,t){var a=t("drFU");"string"==typeof a&&(a=[[n.i,a,""]]),a.locals&&(n.exports=a.locals);t("rjj0")("042e4691",a,!0)}});