webpackJsonp([16],{"8MWs":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("woOf"),r=a.n(s),i=a("Dd8w"),l=a.n(i),m=a("//Fk"),o=a.n(m),n=a("xzVI"),c=a("t/v+"),p=a("5aCZ"),u=a("NYxO"),d=a("QbVN"),g=a("0xDb"),_=a("M4fF"),h=a.n(_),v=a("y1uk"),f={name:"gameEditor",components:{Tinymce:p.a,uploadPrizeAvatar:d.a},data:function(){return{gameId:this.$route.params.id,action:this.$route.params.id?"modify":"add",gameFrm:{matchName:"",matchMode:"",matchType:"",show_end_time:1,answerTime:10,question_type:1,groups:"",group_json:[],time:[],dailyMatchLimit:0,shareReward:0,dailyShareLimit:"",imageUrl:"",share_poster:"",share_img:"",share_desc:"",desc:"",desc_type:1,desc_link:"",notice:"",strategy_switch:0,strategy_content:"",questionNum:10,memberLimit:200,status:1,limit_type:2,reward_type:1,reward_start:"",reward_end:"",mission_switch:0,missions:[],score:10,show_back:0,show_answer:0,show_find_answer:0,award_switch:0,home_type:1,home_img:"",home_img_other:"",daily_sign_integral:"",daily_sign_status:2,daily_sign_continuous_status:2,daily_sign_continuous_days:"",daily_sign_continuous_days_integral:"",ranking_pattern:0,show_from:[]},group_json_msg:"",frmRules:{matchName:[{required:!0,message:"比赛名称必填"}],matchMode:[{required:!0,message:"请选择游戏模式"}],matchType:[{required:!0,message:"请选择比赛模式"}],answerTime:[{required:!0,message:"答题时长必填"}],question_type:[{required:!0,message:"请选择题库类型"}],score:[{required:!0,message:"单题得分必填"}],groups:[{required:!0,message:"请选择比赛题库"}],time:[{required:!0,message:"请选择比赛时间"}],imageUrl:[{required:!0,message:"请上传比赛配图"}],desc:[{required:!0,message:"请输入比赛说明"}],share_desc:[{required:!0,message:"请输入分享文案"}],daily_sign_integral:[{required:!0,message:"请输入每日签到获得积分"}],daily_sign_continuous_status:[{required:!0,message:"请选择开启或者关闭连续签到奖励"}],group_json:[{required:!0,message:"请设置比赛题库"}]},activeStep:0,dailyMatchRadio:0,questionGroupsOptions:[],tasks:[],pageLoading:!0,imgSizeOptions:{size:512e3,width:640,height:244,tips:"只能上传尺寸640px*244px，且不超过500kb的图片"},statusOptions:[{label:"禁用",value:0},{label:"启用",value:1},{label:"隐藏",value:2}],questionTypeOptions:[{label:"全随机",value:1},{label:"按比例随机",value:2}],descTypeOptions:[{label:"富文本",value:1},{label:"h5",value:2}],rankingFrom:[]}},created:function(){var e=this;o.a.all([c.a.group.list({pageIndex:1,pageSize:1e8}),this.getData(),v.a.list({page_index:1,page_size:1e8})]).then(function(t){e.questionGroupsOptions=h.a.filter(t[0].items,function(e){return"enable"===e.status}),e.tasks=t[2].result,e.pageLoading=!1}).catch(function(t){console.log("game editor get data error : ",t),e.pageLoading=!1}),this.$route.params.id||this.gameFrm.group_json.push({groupId:"",number:""})},computed:l()({},Object(u.c)({matchModeOptions:function(e){return e.game.matchMode},matchTypeOptions:function(e){return e.game.matchType}})),methods:{getData:function(){var e=this;return this.gameId?n.a.get(this.gameId).then(function(t){return e.gameFrm=l()({},t,{status:1*t.status,award_switch:t.award_switch-0,mission_switch:t.mission_switch-0,strategy_switch:t.strategy_switch-0,groups:(t.groups||[]).map(function(e){return 1*e}),time:[Object(g.c)(t.startTime),Object(g.c)(t.endTime)],ranking_pattern:t.quiz_match_extend.ranking_pattern||0,show_from:t.quiz_match_extend.show_from||[]}),e.rankingFrom=t.quiz_match_extend.from||[],e.gameFrm.home_type=t.home_type-0,e.gameFrm.missions=e.gameFrm.missions.map(function(e){return parseInt(e,10)}),(e.gameFrm.group_json||[]).map(function(e){e.groupId=1*e.groupId}),e.setShowFrom(),e.dailyMatchRadio=1*t.dailyMatchLimit==0?0:1,t}):o.a.resolve()},setShowFrom:function(){var e=this;this.gameFrm.show_from.forEach(function(t,a){-1===e.rankingFrom.indexOf(t)&&(e.gameFrm.show_from.splice(a,1),e.setShowFrom())})},selectGroup:function(){1===this.gameFrm.question_type&&(this.gameFrm.group_json||(this.gameFrm.group_json=[]),0===this.gameFrm.group_json.length&&this.gameFrm.group_json.push({groupId:"",number:""}))},addGroup:function(e){this.verify(this.gameFrm.group_json[e],!0).status&&this.gameFrm.group_json.push({groupId:"",number:""})},delGroup:function(e){this.gameFrm.group_json.splice(e,1)},verify:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a="";return e.groupId&&e.number?{status:!0}:(a="请检查比赛题库否配置正确",t&&this.$message.error(a),{status:!1,tips:a})},goToStep:function(e){var t=this;e>this.activeStep?this.$refs.gameFrm.validate(function(a){a&&(t.activeStep=e,t.$refs.gameFrm.clearValidate())}):(this.activeStep=e,this.$refs.gameFrm.clearValidate())},save:function(){var e=this;this.$refs.gameFrm.validate(function(t){if(t){var a=r()({},e.gameFrm);if(a.home_img=1*a.home_type==1?"https://scrm-pic.cdn.buerkongjian.com/4d13/28de/4d1328de5cd1c9b398a1cabf291e8a7c.jpg":a.home_img,a.home_img_other=1*a.home_type==1?"https://scrm-pic.cdn.buerkongjian.com/4d13/28de/4d1328de5cd1c9b398a1cabf291e8a7c.jpg":a.home_img_other,e.group_json_msg="",2===a.question_type){var s=0,i=!1;if(a.group_json.map(function(e){s+=e.number,e.groupId&&e.number||(i=!0)}),s!==a.questionNum)return e.group_json_msg="题库题目总数设置有误，请重新设置",e.$message("题库按比例随机得题目总数与设置题目总数不一致"),!1;if(i)return e.group_json_msg="题库按比例随机,比赛题库或者题库出现数量未设置，请完善",e.$message("题库按比例随机,比赛题库或者题库出现数量未设置，请完善 "),!1}if(a.time){var l=a.time;a.startTime=l[0],a.endTime=l[1],delete a.time}"modify"===e.action&&(a.id=e.gameId),("modify"===e.action?n.a.edit(a):n.a.add(a)).then(function(){e.$router.back()})}})},dailyMatchLimitChange:function(e){0===e&&this.$set(this.gameFrm,"dailyMatchLimit",0)},deleteImg:function(e){2!==e?this.gameFrm.share_poster="":this.gameFrm.share_img=""},addAnswer:function(){this.gameFrm.award_data.push({start:"",end:"",award:""})},deleteAnswer:function(e){this.gameFrm.award_data.length>1&&this.gameFrm.award_data.splice(e,1)}}},b={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.pageLoading,expression:"pageLoading"}],staticClass:"app-container"},[a("el-steps",{staticClass:"mb-30",attrs:{active:e.activeStep,"finish-status":"success",simple:""}},[a("el-step",{attrs:{title:"基本设置"}}),e._v(" "),a("el-step",{attrs:{title:"比赛说明"}})],1),e._v(" "),a("el-form",{ref:"gameFrm",staticClass:"from-style",attrs:{model:e.gameFrm,rules:e.frmRules,"label-width":"120px"}},[0===e.activeStep?[a("el-form-item",{attrs:{prop:"matchName",label:"比赛名称"}},[a("el-input",{staticClass:"p-width",attrs:{name:"name",clearable:!0,maxlength:25,placeholder:"请输入比赛名称"},model:{value:e.gameFrm.matchName,callback:function(t){e.$set(e.gameFrm,"matchName",t)},expression:"gameFrm.matchName"}}),e._v(" "),a("small",[e._v("比赛名称只能输入25个字符")])],1),e._v(" "),a("el-form-item",{attrs:{prop:"matchMode",label:"游戏模式"}},[a("el-select",{attrs:{placeholder:"请选择游戏模式"},model:{value:e.gameFrm.matchMode,callback:function(t){e.$set(e.gameFrm,"matchMode",t)},expression:"gameFrm.matchMode"}},e._l(e.matchModeOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{prop:"matchType",label:"比赛模式"}},[a("el-select",{attrs:{placeholder:"请选择比赛模式"},model:{value:e.gameFrm.matchType,callback:function(t){e.$set(e.gameFrm,"matchType",t)},expression:"gameFrm.matchType"}},e._l(e.matchTypeOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{prop:"question_type",label:"题库类型"}},[a("el-select",{attrs:{placeholder:"请选择题库类型"},on:{change:e.selectGroup},model:{value:e.gameFrm.question_type,callback:function(t){e.$set(e.gameFrm,"question_type",t)},expression:"gameFrm.question_type"}},e._l(e.questionTypeOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),2==e.gameFrm.question_type?[a("el-form-item",{attrs:{prop:"group_json",label:"比赛题库"}},[e._l(e.gameFrm.group_json,function(t,s){return a("div",{key:s,staticStyle:{"margin-bottom":"15px"}},[a("div",{staticClass:"random-groups-items"},[a("label",[e._v("比赛题库")]),e._v(" "),a("el-select",{staticStyle:{width:"180px"},attrs:{placeholder:"请选择比赛题库"},model:{value:t.groupId,callback:function(a){e.$set(t,"groupId",a)},expression:"item.groupId"}},e._l(e.questionGroupsOptions,function(e){return a("el-option",{key:e.id,attrs:{label:e.title,value:e.id}})}))],1),e._v(" "),a("div",{staticClass:"random-groups-items"},[a("label",[e._v("题库出现数量")]),e._v(" "),a("el-input-number",{staticStyle:{width:"150px"},attrs:{clearable:!0,maxlength:25,placeholder:"请输入题库出现数量"},model:{value:t.number,callback:function(a){e.$set(t,"number",a)},expression:"item.number"}})],1),e._v(" "),a("div",{staticClass:"random-groups-items"},[a("i",{staticClass:"el-icon-plus",on:{click:function(t){e.addGroup(s)}}}),e._v(" "),e.gameFrm.group_json.length>1?a("i",{staticClass:"el-icon-delete",on:{click:function(t){e.delGroup(s)}}}):e._e(),e._v(" "),s===e.gameFrm.group_json.length-1?a("small",{staticStyle:{display:"inline-block"}},[e._v("题库出现数量之和需等于题目总数")]):e._e()])])}),e._v(" "),e.group_json_msg?a("small",{staticStyle:{color:"#f56c6c"}},[e._v(e._s(e.group_json_msg))]):e._e()],2)]:[a("el-form-item",{attrs:{prop:"groups",label:"比赛题库"}},[a("el-select",{attrs:{placeholder:"请选择比赛题库",multiple:""},model:{value:e.gameFrm.groups,callback:function(t){e.$set(e.gameFrm,"groups",t)},expression:"gameFrm.groups"}},e._l(e.questionGroupsOptions,function(e){return a("el-option",{key:e.id,attrs:{label:e.title,value:1*e.id}})}))],1)],e._v(" "),a("el-form-item",{attrs:{prop:"questionNum",label:"题目总数"}},[a("el-input-number",{attrs:{min:1,name:"questionNum",placeholder:"题目总数"},model:{value:e.gameFrm.questionNum,callback:function(t){e.$set(e.gameFrm,"questionNum",t)},expression:"gameFrm.questionNum"}})],1),e._v(" "),1==e.gameFrm.matchMode?a("el-form-item",{attrs:{prop:"answerTime",label:"每题时长"}},[a("el-input-number",{attrs:{min:1,name:"answerTime",placeholder:"每题时长"},model:{value:e.gameFrm.answerTime,callback:function(t){e.$set(e.gameFrm,"answerTime",t)},expression:"gameFrm.answerTime"}}),e._v(" "),a("small",{staticClass:"ml-5 text-999"},[e._v("(S)")])],1):e._e(),e._v(" "),a("el-form-item",{attrs:{prop:"score",label:"单题得分"}},[a("el-input-number",{attrs:{min:1,name:"score",placeholder:"单题得分"},model:{value:e.gameFrm.score,callback:function(t){e.$set(e.gameFrm,"score",t)},expression:"gameFrm.score"}}),e._v(" "),a("small",{staticClass:"ml-5 text-999"})],1),e._v(" "),1*e.gameFrm.matchType==2?a("el-form-item",{attrs:{prop:"memberLimit",label:"团队人数上限","label-width":"auto"}},[a("el-input-number",{attrs:{min:1,max:200,name:"memberLimit"},model:{value:e.gameFrm.memberLimit,callback:function(t){e.$set(e.gameFrm,"memberLimit",t)},expression:"gameFrm.memberLimit"}}),e._v(" "),a("small",{staticClass:"ml-5 text-999"},[e._v("(人)")])],1):e._e(),e._v(" "),1!=e.gameFrm.matchMode?a("el-form-item",{staticClass:"rel",attrs:{label:"知识背景"}},[a("el-tooltip",{staticClass:"item abs",attrs:{effect:"dark",content:"用户选错答案时，弹出提示框，提示框内容为题目说明",placement:"top-start"}},[a("i",{staticClass:"el-icon-question"})]),e._v(" "),a("el-radio-group",{staticStyle:{width:"500px"},model:{value:e.gameFrm.show_back,callback:function(t){e.$set(e.gameFrm,"show_back",t)},expression:"gameFrm.show_back"}},[a("el-radio",{attrs:{label:0}},[e._v("关")]),e._v(" "),a("el-radio",{attrs:{label:1}},[e._v("开")])],1)],1):e._e(),e._v(" "),a("el-form-item",{staticClass:"show_find_answer",attrs:{label:"是否开启看答案入口","label-width":"auto"}},[a("el-tooltip",{staticClass:"item abs",staticStyle:{left:"-17px"},attrs:{effect:"dark",content:"答题结束是否开启看答案入口",placement:"top-start"}},[a("i",{staticClass:"el-icon-question"})]),e._v(" "),a("el-radio-group",{staticStyle:{width:"500px"},model:{value:e.gameFrm.show_find_answer,callback:function(t){e.$set(e.gameFrm,"show_find_answer",t)},expression:"gameFrm.show_find_answer"}},[a("el-radio",{attrs:{label:0}},[e._v("关")]),e._v(" "),a("el-radio",{attrs:{label:1}},[e._v("开")])],1)],1),e._v(" "),a("el-form-item",{staticClass:"rel",attrs:{label:"正确答案告知","label-width":"auto"}},[a("el-tooltip",{staticClass:"item abs",staticStyle:{left:"-17px"},attrs:{effect:"dark",content:"答案选择错误时，是否提示正确答案",placement:"top-start"}},[a("i",{staticClass:"el-icon-question"})]),e._v(" "),a("el-radio-group",{staticStyle:{width:"500px"},model:{value:e.gameFrm.show_answer,callback:function(t){e.$set(e.gameFrm,"show_answer",t)},expression:"gameFrm.show_answer"}},[a("el-radio",{attrs:{label:0}},[e._v("关")]),e._v(" "),a("el-radio",{attrs:{label:1}},[e._v("开")])],1)],1),e._v(" "),a("el-form-item",{staticClass:"rel",attrs:{prop:"show_end_time",label:"展示比赛倒计时","label-width":"auto"}},[a("el-tooltip",{staticClass:"item abs",staticStyle:{left:"-17px"},attrs:{effect:"dark",content:"是否展示比赛倒计时",placement:"top-start"}},[a("i",{staticClass:"el-icon-question"})]),e._v(" "),a("el-radio-group",{staticStyle:{width:"500px"},model:{value:e.gameFrm.show_end_time,callback:function(t){e.$set(e.gameFrm,"show_end_time",t)},expression:"gameFrm.show_end_time"}},[a("el-radio",{attrs:{label:0}},[e._v("关")]),e._v(" "),a("el-radio",{attrs:{label:1}},[e._v("开")])],1)],1),e._v(" "),a("el-form-item",{attrs:{prop:"time",label:"比赛时间"}},[a("el-date-picker",{attrs:{editable:!1,type:"datetimerange","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间","value-format":"yyyy-MM-dd HH:mm:ss",align:"left"},model:{value:e.gameFrm.time,callback:function(t){e.$set(e.gameFrm,"time",t)},expression:"gameFrm.time"}})],1),e._v(" "),a("el-form-item",{staticClass:"rel",attrs:{label:"比赛次数","label-width":"auto"}},[a("el-tooltip",{staticClass:"item abs",staticStyle:{left:"-17px"},attrs:{effect:"dark",content:"选择用户比赛次数初始值的方式",placement:"top-start"}},[a("i",{staticClass:"el-icon-question"})]),e._v(" "),a("el-radio-group",{model:{value:e.gameFrm.limit_type,callback:function(t){e.$set(e.gameFrm,"limit_type",t)},expression:"gameFrm.limit_type"}},[a("el-radio",{attrs:{label:2}},[e._v("按比赛")]),e._v(" "),a("el-radio",{attrs:{label:1}},[e._v("按日")])],1)],1),e._v(" "),a("el-form-item",[2===e.gameFrm.limit_type?a("div",[e._v("\n          每位用户在该比赛一共有\n          "),a("el-input",{staticStyle:{width:"60px"},attrs:{type:"num",name:"host",min:1,size:"mini"},model:{value:e.gameFrm.dailyMatchLimit,callback:function(t){e.$set(e.gameFrm,"dailyMatchLimit",t)},expression:"gameFrm.dailyMatchLimit"}}),e._v("次答题机会\n        ")],1):a("div",[a("el-radio-group",{on:{change:e.dailyMatchLimitChange},model:{value:e.dailyMatchRadio,callback:function(t){e.dailyMatchRadio=t},expression:"dailyMatchRadio"}},[a("el-radio",{attrs:{label:0}},[e._v("不限")]),e._v(" "),a("el-radio",{attrs:{label:1}},[e._v("\n              限制\n              "),a("span",{staticStyle:{color:"#000"}},[e._v("\n                   每天可参加\n                "),a("el-input",{staticStyle:{width:"60px"},attrs:{type:"num",name:"host",min:1,size:"mini",disabled:0===e.dailyMatchRadio},model:{value:e.gameFrm.dailyMatchLimit,callback:function(t){e.$set(e.gameFrm,"dailyMatchLimit",t)},expression:"gameFrm.dailyMatchLimit"}}),e._v("次\n              ")],1)])],1)],1)]),e._v(" "),a("el-form-item",{staticClass:"rel",attrs:{prop:"shareReward",label:"分享奖励"}},[a("el-tooltip",{staticClass:"item abs",attrs:{effect:"dark",content:"用户分享成功得到的比赛次数",placement:"top-start"}},[a("i",{staticClass:"el-icon-question"})]),e._v(" "),a("el-radio-group",{staticStyle:{width:"500px"},model:{value:e.gameFrm.reward_type,callback:function(t){e.$set(e.gameFrm,"reward_type",t)},expression:"gameFrm.reward_type"}},[a("el-radio",{attrs:{label:1}},[e._v("整数")]),e._v(" "),a("el-radio",{attrs:{label:2}},[e._v("小数")])],1)],1),e._v(" "),a("el-form-item",[1==e.gameFrm.reward_type?a("div",[e._v("\n          可获得答题次数\n          "),a("el-input",{staticStyle:{width:"60px"},attrs:{type:"num",name:"host",min:1,size:"mini"},model:{value:e.gameFrm.shareReward,callback:function(t){e.$set(e.gameFrm,"shareReward",t)},expression:"gameFrm.shareReward"}})],1):a("div",[e._v("\n          可获得答题次数\n          "),a("el-input",{staticStyle:{width:"60px"},attrs:{type:"num",name:"host",min:1,size:"mini"},model:{value:e.gameFrm.reward_start,callback:function(t){e.$set(e.gameFrm,"reward_start",t)},expression:"gameFrm.reward_start"}}),e._v("~\n          "),a("el-input",{staticStyle:{width:"60px"},attrs:{type:"num",name:"host",min:1,size:"mini"},model:{value:e.gameFrm.reward_end,callback:function(t){e.$set(e.gameFrm,"reward_end",t)},expression:"gameFrm.reward_end"}})],1)]),e._v(" "),a("el-form-item",{staticClass:"rel",attrs:{label:"任务"}},[a("el-tooltip",{staticClass:"item abs",staticStyle:{left:"-55px"},attrs:{effect:"dark",content:"选择该比赛是否开启任务",placement:"top-start"}},[a("i",{staticClass:"el-icon-question"})]),e._v(" "),a("el-radio-group",{model:{value:e.gameFrm.mission_switch,callback:function(t){e.$set(e.gameFrm,"mission_switch",t)},expression:"gameFrm.mission_switch"}},[a("el-radio",{attrs:{label:0}},[e._v("关")]),e._v(" "),a("el-radio",{attrs:{label:1}},[e._v("开")])],1),e._v(" "),1==e.gameFrm.mission_switch?a("el-select",{staticStyle:{display:"block",width:"250px"},attrs:{placeholder:"请选择",multiple:""},model:{value:e.gameFrm.missions,callback:function(t){e.$set(e.gameFrm,"missions",t)},expression:"gameFrm.missions"}},e._l(e.tasks,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})):e._e()],1),e._v(" "),e._e(),e._v(" "),1==e.gameFrm.daily_sign_status?[a("el-form-item",{attrs:{prop:"daily_sign_integral",label:"每日签到获得"}},[a("el-input",{staticStyle:{width:"120px"},attrs:{type:"num",name:"integral",min:1,size:"mini"},model:{value:e.gameFrm.daily_sign_integral,callback:function(t){e.$set(e.gameFrm,"daily_sign_integral",t)},expression:"gameFrm.daily_sign_integral"}}),e._v("积分\n        ")],1),e._v(" "),a("el-form-item",{attrs:{prop:"daily_sign_continuous_status",label:"每日签到获得"}},[a("el-radio-group",{model:{value:e.gameFrm.daily_sign_continuous_status,callback:function(t){e.$set(e.gameFrm,"daily_sign_continuous_status",t)},expression:"gameFrm.daily_sign_continuous_status"}},[a("el-radio",{attrs:{label:2}},[e._v("关")]),e._v(" "),a("el-radio",{attrs:{label:1}},[e._v("开")])],1)],1),e._v(" "),1==e.gameFrm.daily_sign_continuous_status?a("el-form-item",{attrs:{label:""}},[e._v("\n          连续签到\n          "),a("el-input",{staticStyle:{width:"60px"},attrs:{type:"num",name:"day",min:1,size:"mini"},model:{value:e.gameFrm.daily_sign_continuous_days,callback:function(t){e.$set(e.gameFrm,"daily_sign_continuous_days",t)},expression:"gameFrm.daily_sign_continuous_days"}}),e._v("天，可额外获得\n          "),a("el-input",{staticStyle:{width:"100px"},attrs:{type:"num",name:"integral",min:1,size:"mini"},model:{value:e.gameFrm.daily_sign_continuous_days_integral,callback:function(t){e.$set(e.gameFrm,"daily_sign_continuous_days_integral",t)},expression:"gameFrm.daily_sign_continuous_days_integral"}}),e._v("积分\n        ")],1):e._e()]:e._e(),e._v(" "),a("el-form-item",{staticClass:"rel",attrs:{prop:"dailyShareLimit",label:"最大分享奖励","label-width":"auto"}},[a("el-tooltip",{staticClass:"item abs",staticStyle:{left:"-17px"},attrs:{effect:"dark",content:"通过分享额外获得的次数",placement:"top-start"}},[a("i",{staticClass:"el-icon-question"})]),e._v(" "),a("el-input-number",{attrs:{min:0,name:"dailyShareLimit",placeholder:"请输入用户每天最多分享次数"},model:{value:e.gameFrm.dailyShareLimit,callback:function(t){e.$set(e.gameFrm,"dailyShareLimit",t)},expression:"gameFrm.dailyShareLimit"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"imageUrl",label:"比赛配图"}},[a("upload-prize-avatar",{model:{value:e.gameFrm.imageUrl,callback:function(t){e.$set(e.gameFrm,"imageUrl",t)},expression:"gameFrm.imageUrl"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"share_poster",label:"分享海报（选填）"}},[a("upload-prize-avatar",{model:{value:e.gameFrm.share_poster,callback:function(t){e.$set(e.gameFrm,"share_poster",t)},expression:"gameFrm.share_poster"}}),e._v(" "),e.gameFrm.share_poster?a("el-button",{attrs:{type:"danger"},on:{click:function(t){e.deleteImg(1)}}},[e._v("删除图片")]):e._e()],1),e._v(" "),a("el-form-item",{attrs:{prop:"status",label:"状态"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.gameFrm.status,callback:function(t){e.$set(e.gameFrm,"status",t)},expression:"gameFrm.status"}},e._l(e.statusOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{prop:"ranking_pattern",label:"排行榜展示模式"}},[a("el-radio-group",{model:{value:e.gameFrm.ranking_pattern,callback:function(t){e.$set(e.gameFrm,"ranking_pattern",t)},expression:"gameFrm.ranking_pattern"}},[a("el-radio",{attrs:{label:0}},[e._v("通用")]),e._v(" "),a("el-radio",{attrs:{label:1}},[e._v("表单")])],1)],1),e._v(" "),1==e.gameFrm.ranking_pattern?a("el-form-item",{attrs:{prop:"show_from"}},[a("el-checkbox-group",{attrs:{max:2},model:{value:e.gameFrm.show_from,callback:function(t){e.$set(e.gameFrm,"show_from",t)},expression:"gameFrm.show_from"}},e._l(e.rankingFrom,function(t){return a("el-checkbox",{key:t,attrs:{label:t}},[e._v(e._s(t))])})),e._v(" "),a("br"),e._v(" "),a("small",[e._v("排行榜表单模式，只能勾选两项显示再排行榜信息栏中")])],1):e._e(),e._v(" "),a("el-form-item",{attrs:{prop:"notice",label:"公告信息"}},[a("el-input",{staticClass:"p-width",attrs:{type:"textarea",rows:"3",autosize:!0,name:"notice",clearable:!0,placeholder:"请输入公告信息"},model:{value:e.gameFrm.notice,callback:function(t){e.$set(e.gameFrm,"notice",t)},expression:"gameFrm.notice"}}),e._v(" "),a("small",[e._v("不输入公告信息，c端就不会显示公告；公告信息超过18个字会滚动显示")])],1),e._v(" "),a("el-form-item",[a("el-button",{on:{click:function(t){e.$router.back()}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){t.preventDefault(),t.stopPropagation(),e.goToStep(1)}}},[e._v("下一步")])],1)]:1===e.activeStep?[a("el-form-item",{attrs:{prop:"desc",label:"比赛说明模式"}},[a("el-select",{attrs:{placeholder:"请选择比赛说明模式"},on:{change:e.selectGroup},model:{value:e.gameFrm.desc_type,callback:function(t){e.$set(e.gameFrm,"desc_type",t)},expression:"gameFrm.desc_type"}},e._l(e.descTypeOptions,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),2==e.gameFrm.desc_type?[a("el-form-item",{attrs:{prop:"desc",label:"比赛说明链接"}},[a("el-input",{staticClass:"p-width",attrs:{name:"name",clearable:!0,maxlength:25,placeholder:"请输入比赛说明链接"},model:{value:e.gameFrm.desc_link,callback:function(t){e.$set(e.gameFrm,"desc_link",t)},expression:"gameFrm.desc_link"}})],1)]:[a("el-form-item",{attrs:{prop:"desc",label:"比赛说明"}},[a("tinymce",{attrs:{placeholder:"请输入比赛说明",height:300},model:{value:e.gameFrm.desc,callback:function(t){e.$set(e.gameFrm,"desc",t)},expression:"gameFrm.desc"}})],1)],e._v(" "),a("el-form-item",{staticClass:"rel",attrs:{label:"高分攻略"}},[a("el-tooltip",{staticClass:"item abs",attrs:{effect:"dark",content:"高分秘籍在排行榜中显示",placement:"top-start"}},[a("i",{staticClass:"el-icon-question"})]),e._v(" "),a("el-radio-group",{model:{value:e.gameFrm.strategy_switch,callback:function(t){e.$set(e.gameFrm,"strategy_switch",t)},expression:"gameFrm.strategy_switch"}},[a("el-radio",{attrs:{label:0}},[e._v("隐藏")]),e._v(" "),a("el-radio",{attrs:{label:1}},[e._v("显示")])],1)],1),e._v(" "),a("el-form-item",{attrs:{prop:"strategy_content"}},[1==e.gameFrm.strategy_switch?a("tinymce",{attrs:{placeholder:"请输入高分攻略",height:300},model:{value:e.gameFrm.strategy_content,callback:function(t){e.$set(e.gameFrm,"strategy_content",t)},expression:"gameFrm.strategy_content"}}):e._e()],1),e._v(" "),a("el-form-item",[a("el-button",{on:{click:function(t){t.preventDefault(),t.stopPropagation(),e.goToStep(0)}}},[e._v("上一步")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){t.preventDefault(),t.stopPropagation(),e.save(t)}}},[e._v("保存")])],1)]:e._e()],2)],1)},staticRenderFns:[]};var y=a("VU/8")(f,b,!1,function(e){a("KBaV")},"data-v-7ad1c0f8",null);t.default=y.exports},KBaV:function(e,t,a){var s=a("Ur+k");"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);a("rjj0")("6b1c0348",s,!0)},"Ur+k":function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"\n.rel[data-v-7ad1c0f8] {\r\n  position: relative;\n}\n.abs[data-v-7ad1c0f8] {\r\n  position: absolute;\r\n  left: -80px;\r\n  top: 10px;\n}\nlabel[data-v-7ad1c0f8]{\r\n  text-align: right;\r\n  float: left;\r\n  font-size: 14px;\r\n  color: #606266;\r\n  padding: 0 12px 0 0;\r\n  -webkit-box-sizing: border-box;\r\n          box-sizing: border-box;\n}\nsmall[data-v-7ad1c0f8]{\r\n  display: block;color: #999999\n}\n.p-width[data-v-7ad1c0f8]{\r\n  width: 500px;\n}\n.from-style[data-v-7ad1c0f8]{\r\n  display: block;\r\n  width: 100%;\r\n  max-width: 100% !important;\n}\n.random-groups-items[data-v-7ad1c0f8]{\r\n  display: inline-block;\r\n  width: 280px;\n}\n.random-groups-items i[data-v-7ad1c0f8]{\r\n  font-size: 16px;\r\n  cursor: pointer;\r\n  margin-right: 10px;\n}\r\n",""])}});