webpackJsonp([113],{Rj65:function(n,e,t){var a=t("hwOc");"string"==typeof a&&(a=[[n.i,a,""]]),a.locals&&(n.exports=a.locals);t("rjj0")("100e19f0",a,!0)},hwOc:function(n,e,t){(n.exports=t("FZ+f")(!1)).push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},kfC1:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=t("Dd8w"),i=t.n(a),r=t("YK4W"),l=t("Hkkm"),s=t("M4fF"),o=t.n(s),c=t("ihK9"),p=t("NYxO"),d={name:"template-list",components:{customElTable:r.a,smallProcedures:c.a},data:function(){return{tableOptions:[{label:"ID",prop:"id",width:120},{label:"标题",prop:"title"},{prop:"USER_ACTION",actions:[{type:"selections",label:"选用"}]}],tableData:[],libraryFrm:{id:"",title:""},pageIndex:1,pageSize:20,totalCount:0,tabLoading:!0,query:null,dialogVisible:!1,select_template_id:"",type:"data"}},computed:i()({},Object(p.c)({appid:function(n){return n.templateMsg.appid},mini_program:function(n){return n.templateMsg.mini_program}})),created:function(){this.getData()},methods:{getData:function(){var n=this,e=this.query||{};this.tabLoading=!0,l.a.templates(i()({page_index:this.pageIndex,page_size:this.pageSize},e)).then(function(e){n.tableData=(e.result||[]).map(function(n){return i()({},n,{status_name:1*n.status==1?"启用":"禁用"})}),n.totalCount=1*e.totalCount,n.tabLoading=!1})},handleClose:function(){if(!this.appid)return this.$message("请先选择小程序，才能进行下一步操作。"),!1},small_procedures_handler:function(n){this.dialogVisible=n,"select"===this.type?this.$router.push({name:"templateLibraryModify",params:{id:this.select_template_id}}):this.getData()},synchronization:function(){var n=this;l.a.update_library().then(function(){n.$message({message:"同步微信模板消息库成功",type:"success"})}).catch(function(){n.$message({message:"同步微信模板消息库失败",type:"error"})})},switchProcedures:function(){this.dialogVisible=!0},searchActivityList:function(){this.query=o.a.cloneDeep(this.libraryFrm),this.pageIndex=1,this.getData()},actionHandler:function(n,e){if("selections"===n){if(!this.appid)return this.select_template_id=e.id,this.type="select",this.dialogVisible=!0,!1;this.$router.push({name:"templateLibraryModify",params:{id:e.id}})}},sizeChangeHandler:function(n){this.pageSize=n,this.pageIndex=1,this.getData()},pageChangeHandler:function(n){this.pageIndex=n,this.getData()},resetForm:function(n){this.$refs[n].resetFields()}}},u={render:function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",{staticClass:"app-container"},[t("div",{staticClass:"control-group"},[t("el-form",{ref:"libraryFrm",attrs:{inline:!0,model:n.libraryFrm}},[t("el-form-item",{attrs:{prop:"id",label:"ID"}},[t("el-input",{attrs:{placeholder:"ID"},model:{value:n.libraryFrm.id,callback:function(e){n.$set(n.libraryFrm,"id",e)},expression:"libraryFrm.id"}})],1),n._v(" "),t("el-form-item",{attrs:{prop:"title",label:"标题"}},[t("el-input",{attrs:{placeholder:"标题"},model:{value:n.libraryFrm.title,callback:function(e){n.$set(n.libraryFrm,"title",e)},expression:"libraryFrm.title"}})],1),n._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:n.searchActivityList}},[n._v("查询")]),n._v(" "),t("el-button",{attrs:{icon:"el-icon-refresh"},on:{click:function(e){n.resetForm("libraryFrm")}}},[n._v("重置")])],1),n._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:n.switchProcedures}},[n._v("选择/切换小程序")]),n._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:n.synchronization}},[n._v("同步微信模板消息库")])],1),n._v(" "),n.mini_program?t("small",{staticStyle:{float:"right",color:"#111","font-weight":"bold","margin-right":"15px"}},[n._v(n._s(n.mini_program.nick_name))]):n._e()],1)],1),n._v(" "),t("custom-el-table",{directives:[{name:"loading",rawName:"v-loading",value:n.tabLoading,expression:"tabLoading"}],attrs:{tableData:n.tableData,tableOptions:n.tableOptions,total:n.totalCount},on:{action:n.actionHandler,"size-change":n.sizeChangeHandler,"page-change":n.pageChangeHandler},model:{value:n.pageIndex,callback:function(e){n.pageIndex=e},expression:"pageIndex"}}),n._v(" "),t("el-dialog",{attrs:{title:"选择小程序",visible:n.dialogVisible,width:"50%"},on:{"update:visible":function(e){n.dialogVisible=e}}},[t("smallProcedures",{attrs:{name:"small"},on:{small_procedures_handler:n.small_procedures_handler}})],1)],1)},staticRenderFns:[]};var m=t("VU/8")(d,u,!1,function(n){t("Rj65")},"data-v-3410a05c",null);e.default=m.exports}});