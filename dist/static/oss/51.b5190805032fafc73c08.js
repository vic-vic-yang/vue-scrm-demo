webpackJsonp([51],{"4+yI":function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=e("Dd8w"),s=e.n(n),i=e("YK4W"),o=e("MN6w"),r=e("0xDb"),u={name:"taskOverview",components:{customElTable:i.a},data:function(){return{tableOptions:[{label:"序号",prop:"id",width:100},{label:"任务名称",prop:"name"},{label:"任务条件",prop:"condition"},{label:"创建时间",prop:"create_time",sortable:!0,width:200,className:"ph-6"},{prop:"USER_ACTION",width:300,actions:["edit",{type:"status",options:this.getStatusBtnInfo}]}],tableData:[],pageIndex:1,pageSize:20,totalCount:0,tabLoading:!0}},created:function(){this.getData()},methods:{getData:function(){var t=this,a=this.query||{};this.tabLoading=!0,o.a.list(s()({page_index:this.pageIndex,page_size:this.pageSize},a)).then(function(a){t.tableData=(a.result||[]).map(function(t){return s()({},t,{create_time:""===t.create_time||1*t.create_time==0?"--":Object(r.c)(t.create_time)})}),t.totalCount=1*a.totalCount,t.tabLoading=!1}).catch(function(a){t.$message({type:"info",message:a.message})})},createActivity:function(){this.$router.push({name:"missionTaskCreate"})},editHandler:function(t){this.$router.push({name:"missionAwardTaskCreate",params:{id:t.id}})},actionHandler:function(t,a){var e=this;if("status"===t){var n=this.getStatusBtnInfo(a).label,s="确认"+n+"任务 <b>"+a.name+"</b> 吗？";this.$confirm(s,n,{dangerouslyUseHTMLString:!0,confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){o.a.status({id:a.id,status:1*a.status==1?"2":"1"}).then(function(t){e.getData()})}).catch(function(){e.$message({type:"info",message:"已取消"+n})})}},go_task_details:function(){this.$router.push({name:"missionTaskDetails"})},sizeChangeHandler:function(t){this.pageSize=t,this.pageIndex=1,this.getData()},pageChangeHandler:function(t){this.pageIndex=t,this.getData()},getStatusBtnInfo:function(t){return t?1===1*t.status?{btn:"danger",label:"关闭"}:{btn:"primary",label:"开启"}:{btn:"danger",label:"关闭"}}}},c={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"app-container task-list"},[e("div",{staticClass:"header"},[e("el-row",{attrs:{gutter:24}},[e("el-col",{attrs:{span:6}},[e("div",{staticClass:"grid-content bg-purple",staticStyle:{"padding-left":"10px"}},[e("div",{staticClass:"task-btn",staticStyle:{"font-size":"16px","margin-top":"10px"}},[t._v("积分任务")])])]),t._v(" "),e("el-col",{attrs:{span:6,offset:10}},[e("div",{staticClass:"grid-content bg-purple",staticStyle:{"text-align":"right"}},[e("el-button",{staticClass:"task-btn",on:{click:t.go_task_details}},[t._v("任务日志")])],1)])],1)],1),t._v(" "),e("custom-el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tabLoading,expression:"tabLoading"}],attrs:{tableData:t.tableData,tableOptions:t.tableOptions,total:t.totalCount},on:{edit:t.editHandler,action:t.actionHandler,"size-change":t.sizeChangeHandler,"page-change":t.pageChangeHandler},model:{value:t.pageIndex,callback:function(a){t.pageIndex=a},expression:"pageIndex"}})],1)},staticRenderFns:[]};var l=e("VU/8")(u,c,!1,function(t){e("q0ic")},"data-v-b8d2939c",null);a.default=l.exports},MN6w:function(t,a,e){"use strict";var n=e("gyMJ");a.a={list:function(t){return n.a.get("/mission/v1/mission/missions",{params:t}).then(function(t){return t.data})},status:function(t){return n.a.put("/mission/v1/mission/missions/"+t.id+"/status/"+t.status,{autoShowMessage:!0,showMessageType:"put"})},awardDetails:function(t){return n.a.get("/mission/v1/mission/missions/view-reward/"+t.type).then(function(t){return t.data})},awardAdd:function(t){return n.a.post("/mission/v1/goods/goods",t,{autoShowMessage:!0})},awardEdit:function(t){return n.a.put("/mission/v1/mission/missions/"+t.id,t,{autoShowMessage:!0,showMessageType:"put"})},get_reply:function(t){return n.a.get("/mission/v1/mission/missions/"+t.mission_id+"/reply/"+t.type)},edit_reply:function(t){return n.a.post("/mission/v1/mission/missions/edit-reply/"+t.id,t,{autoShowMessage:!0})},reply_status:function(t){return n.a.put("/mission/v1/mission/missions/reply-status/"+t.id,t,{autoShowMessage:!0,showMessageType:"put"})}}},Yqii:function(t,a,e){(t.exports=e("FZ+f")(!1)).push([t.i,"\n.header[data-v-b8d2939c]{\n  border-bottom: 1px solid #ccc;\n  padding: 10px 0;\n  margin-bottom: 10px;\n}\n.task-btn[data-v-b8d2939c]{\n  color: #000;\n}\n.pagination-wrapper[data-v-b8d2939c] {\n  margin: 20px 0;\n}\n",""])},q0ic:function(t,a,e){var n=e("Yqii");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);e("rjj0")("396097a0",n,!0)}});