webpackJsonp([78],{"0ILd":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("YK4W"),i=a("0xDb"),o=a("z2KI"),s={name:"contentUser",components:{customElTable:n.a},data:function(){return{searchKey:{type:"文章",platform:"微信公众号",keyword:""},query:null,tableOptions:[{label:"",prop:"SELECTION",align:"center"},{label:"订阅类型",prop:"content_type"},{label:"订阅平台",prop:"source_type"},{label:"名称",prop:"mp_name"},{label:"发布模式",prop:"publish_type"},{label:"订阅时间",prop:"create"},{prop:"USER_ACTION",actions:[{label:"解除",type:"del"},{label:"编辑",type:"detail"}]}],tableData:[],selectData:[],pageIndex:1,pageSize:20,totalCount:0,tabLoading:!0}},created:function(){this.getData()},methods:{getData:function(){var e=this;this.tableData=[{id:1,name:"张三",nickname:"微信昵称",phone:"12312312321",address:"成都市武侯区天府二街"}],this.tabLoading=!0,o.a.subscribed({pageIndex:this.pageIndex,pageSize:this.pageSize}).then(function(t){e.dataChange(t.result),e.tableData=t.result,e.totalCount=1*t.totalCount,e.tabLoading=!1}).catch(function(){e.tabLoading=!1})},dataChange:function(e){e.forEach(function(e){switch(e.content_type){case"1":e.content_type="文章"}switch(e.source_type){case"1":e.source_type="微信公众号"}switch(e.publish_type){case"1":e.publish_type="手动";break;default:e.publish_type="自动"}e.create=Object(i.c)(e.create)})},actionHandler:function(e,t){"detail"===e&&this.$router.push({name:"contentSubscribeEdit",params:{id:t.id}})},handleSelectionChange:function(e){console.log(e);var t=[];e.forEach(function(e){t.push(e.id)}),this.selectData=t},deleteHandler:function(e){var t=this,a="",n="";if(e.id)a="确认解除 <b>"+e.mp_name+"</b> 吗？",n=e.id;else{if(0===this.selectData.length)return void this.$message({type:"info",message:"请选择订阅项目"});a="确认解除所有已选择的订阅吗？",n=this.selectData.join()}this.$confirm(a,"删除",{dangerouslyUseHTMLString:!0,confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){o.a.delete({gather_id:n}).then(function(e){e.success?(t.$message({type:"success",message:"解除成功!"}),t.getData()):t.$message({type:"error",message:"解除失败!"})})})},sizeChangeHandler:function(e){this.pageSize=e,this.pageIndex=1,this.getData()},pageChangeHandler:function(e){this.pageIndex=e,this.getData()}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"control-group"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.$router.push({name:"subscribeManagement"})}}},[e._v("订阅管理")]),e._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:e.deleteHandler}},[e._v("解除")])],1),e._v(" "),a("custom-el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tabLoading,expression:"tabLoading"}],attrs:{tableData:e.tableData,tableOptions:e.tableOptions,total:e.totalCount},on:{handleSelectionChange:e.handleSelectionChange,delete:e.deleteHandler,action:e.actionHandler,"size-change":e.sizeChangeHandler,"page-change":e.pageChangeHandler},model:{value:e.pageIndex,callback:function(t){e.pageIndex=t},expression:"pageIndex"}})],1)},staticRenderFns:[]};var c=a("VU/8")(s,l,!1,function(e){a("Lclu")},"data-v-975aeea0",null);t.default=c.exports},Lclu:function(e,t,a){var n=a("Up8I");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a("rjj0")("80b55110",n,!0)},Up8I:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"\n.control-group[data-v-975aeea0] {\n  text-align: right;\n  margin-bottom: 20px;\n}\n",""])}});