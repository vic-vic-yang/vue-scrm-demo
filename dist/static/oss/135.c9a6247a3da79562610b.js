webpackJsonp([135],{MbVW:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"\n.control-group[data-v-067888ae]{\r\n  margin-bottom: 20px;\r\n  overflow: hidden;\n}\r\n",""])},WfRC:function(t,e,a){var n=a("MbVW");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a("rjj0")("86e26b32",n,!0)},uhRa:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("Dd8w"),i=a.n(n),o=a("YK4W"),s=a("50QE"),r={name:"highlightList",components:{customElTable:o.a},data:function(){return{tableOptions:[{label:"编号",prop:"id",width:80},{label:"发布时间",prop:"time",sortable:!0},{label:"内容",prop:"content",width:660,options:{type:"html"}},{label:"状态",prop:"status_name"},{prop:"USER_ACTION",actions:["edit",{type:"status",options:this.getStatusBtnInfo},"del"]}],tableData:[],pageIndex:1,pageSize:20,totalCount:0,tabLoading:!0}},created:function(){this.getData()},methods:{getData:function(){var t=this;this.tabLoading=!0,s.a.list({page_index:this.pageIndex,page_size:this.pageSize}).then(function(e){t.tableData=(e.data.result||[]).map(function(t){return i()({},t,{status_name:1*t.status==1?"启用":"禁用"})}),t.totalCount=1*e.data.totalCount,t.tabLoading=!1})},createCover:function(){this.$router.push({name:"activityHighlightCover"})},createActivity:function(){this.$router.push({name:"activityHighlightCreate"})},editHandler:function(t){this.$router.push({name:"activityHighlightModify",params:{id:t.id}})},deleteHandler:function(t){var e=this;this.$confirm("确认删除这条内容吗？","删除",{dangerouslyUseHTMLString:!0,confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){s.a.del(t).then(function(){e.getData()})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},actionHandler:function(t,e){var a=this;if("status"===t){var n=this.getStatusBtnInfo(e).label;this.$confirm("确认立即"+n+"这条内容吗？",n,{dangerouslyUseHTMLString:!0,confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){s.a.status({id:e.id,status:1*e.status==1?"2":"1"}).then(function(){a.getData()})}).catch(function(){a.$message({type:"info",message:"已取消"+n})})}},sizeChangeHandler:function(t){this.pageSize=t,this.pageIndex=1,this.getData()},pageChangeHandler:function(t){this.pageIndex=t,this.getData()},getStatusBtnInfo:function(t){return t?1===1*t.status?{btn:"danger",label:"禁用"}:{btn:"primary",label:"启用"}:{btn:"danger",label:"禁用"}}}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"control-group"},[a("div",{staticStyle:{float:"right"}},[a("el-button",{attrs:{type:"primary",plain:""},on:{click:t.createCover}},[a("i",{staticClass:"fs-13 el-icon-picture mr-5"}),t._v("设置封面\n      ")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.createActivity}},[a("i",{staticClass:"fs-13 el-icon-plus mr-5"}),t._v("新建活动\n      ")])],1)]),t._v(" "),a("custom-el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tabLoading,expression:"tabLoading"}],attrs:{tableData:t.tableData,tableOptions:t.tableOptions,total:t.totalCount},on:{edit:t.editHandler,delete:t.deleteHandler,action:t.actionHandler,"size-change":t.sizeChangeHandler,"page-change":t.pageChangeHandler},model:{value:t.pageIndex,callback:function(e){t.pageIndex=e},expression:"pageIndex"}})],1)},staticRenderFns:[]};var c=a("VU/8")(r,l,!1,function(t){a("WfRC")},"data-v-067888ae",null);e.default=c.exports}});