webpackJsonp([121],{ADUH:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=e("Dd8w"),i=e.n(n),s=e("YK4W"),o=e("Djz4"),l=e("M4fF"),r=e.n(l),u={name:"contentSignUp",components:{customElTable:s.a},data:function(){return{ifUserDetails:!1,ifReason:!1,reason:"",auditId:null,activityQueryFrm:{status:""},query:null,stateOptions:[{value:0,label:"待审核"},{value:1,label:"已审核"},{value:2,label:"未审核"}],tableOptions:[{label:"序号",prop:"id",width:120},{label:"活动标题",prop:"activity_name"},{label:"用户名称",prop:"name"},{label:"联系电话",prop:"phone"},{label:"身份证号",prop:"id_card"},{label:"取号码",prop:"ticket"},{label:"审核状态",prop:"status_cn",width:120,options:{type:"tag",prop:"status"}},{prop:"USER_ACTION",actions:[{label:"审核",type:"detail",options:this.getStatusBtnInfo}]}],tableData:[],pageIndex:1,pageSize:20,totalCount:0,tabLoading:!0}},created:function(){this.getData()},methods:{getData:function(){var t=this,a=this.query||{};a.id=this.$route.params.id,console.log(a),this.tabLoading=!0,o.a.signUp.list(i()({pageIndex:this.pageIndex,pageSize:this.pageSize},a)).then(function(a){a.result.forEach(function(t){t.status_cn=t.status-0==2?"未过审":t.status-0==1?"已过审":"未审核",t.status=t.status-0==2?0:t.status-0==1?1:2}),t.tableData=a.result,t.totalCount=1*a.totalCount,t.tabLoading=!1}).catch(function(){t.tabLoading=!1})},searchUser:function(){this.query=r.a.cloneDeep(this.activityQueryFrm),this.pageIndex=1,this.getData()},getStatusBtnInfo:function(t){return{btn:"primary",label:"审核"}},actionHandler:function(t,a){"detail"===t&&(this.ifUserDetails=!0,this.auditId=a.id)},workPass:function(t){1===t?this.submitReason(t):this.ifReason=!0},submitReason:function(t){var a=this,e={};e.status=t&&1===t?1:2,e.reason=t&&1===t?"":this.reason;var n=i()({id:this.auditId},e);o.a.signUp.status(n).then(function(){a.ifUserDetails=!1,a.ifReason=!1,a.getData()})},sizeChangeHandler:function(t){this.pageSize=t,this.pageIndex=1,this.getData()},pageChangeHandler:function(t){this.pageIndex=t,this.getData()}}},c={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"app-container"},[e("div",{staticClass:"control-group"},[e("el-form",{attrs:{inline:!0,model:t.activityQueryFrm}},[e("el-form-item",{attrs:{label:"审核状态"}},[e("el-select",{attrs:{placeholder:"全部",clearable:""},model:{value:t.activityQueryFrm.status,callback:function(a){t.$set(t.activityQueryFrm,"status",a)},expression:"activityQueryFrm.status"}},t._l(t.stateOptions,function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),e("el-form-item",[e("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.searchUser}},[t._v("查询")])],1)],1)],1),t._v(" "),e("custom-el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tabLoading,expression:"tabLoading"}],attrs:{tableData:t.tableData,tableOptions:t.tableOptions,total:t.totalCount},on:{action:t.actionHandler,"size-change":t.sizeChangeHandler,"page-change":t.pageChangeHandler},model:{value:t.pageIndex,callback:function(a){t.pageIndex=a},expression:"pageIndex"}}),t._v(" "),e("el-dialog",{attrs:{title:"选择审核状态为？",width:"30%",visible:t.ifUserDetails},on:{"update:visible":function(a){t.ifUserDetails=a}}},[e("el-dialog",{attrs:{width:"30%",title:"原因",visible:t.ifReason,"append-to-body":""},on:{"update:visible":function(a){t.ifReason=a}}},[e("el-input",{attrs:{placeholder:"请输入未过审原因"},model:{value:t.reason,callback:function(a){t.reason=a},expression:"reason"}}),t._v(" "),e("div",{staticClass:"work-btn",staticStyle:{"margin-top":"20px"}},[e("el-button",{staticStyle:{margin:"auto"},attrs:{type:"primary"},on:{click:t.submitReason}},[t._v("提交")])],1)],1),t._v(" "),e("div",{staticClass:"work-btn"},[e("el-button",{attrs:{type:"danger"},on:{click:function(a){t.workPass(2)}}},[t._v("审核未过")]),t._v(" "),e("el-button",{attrs:{type:"primary"},on:{click:function(a){t.workPass(1)}}},[t._v("审核通过")])],1)],1)],1)},staticRenderFns:[]};var p=e("VU/8")(u,c,!1,function(t){e("y2Jc")},"data-v-279f73aa",null);a.default=p.exports},Z4iv:function(t,a,e){(t.exports=e("FZ+f")(!1)).push([t.i,"\n.work-btn[data-v-279f73aa]{\r\n  width: 50%;\r\n  display: -webkit-box;\r\n  display: -ms-flexbox;\r\n  display: flex;\r\n  margin: 0 auto;\r\n  -webkit-box-pack: justify;\r\n      -ms-flex-pack: justify;\r\n          justify-content: space-between;\n}\r\n",""])},y2Jc:function(t,a,e){var n=e("Z4iv");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);e("rjj0")("fe560236",n,!0)}});