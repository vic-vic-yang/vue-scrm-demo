webpackJsonp([102],{DqQC:function(n,t,e){var a=e("kEwH");"string"==typeof a&&(a=[[n.i,a,""]]),a.locals&&(n.exports=a.locals);e("rjj0")("25846804",a,!0)},Ud5F:function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("YK4W"),i=e("EhSW"),l=e("0xDb"),o=e("M4fF"),r=e.n(o),s={name:"lotteryRule",components:{customElTable:a.a},data:function(){return{lotteryRuleId:this.$route.query.lotteryRuleId,tableOptions:[{label:"ID",prop:"id",width:65},{label:"奖品等级",prop:"level_name",width:120},{label:"奖品",prop:"prize_name"},{label:"奖品数目",prop:"assigned_num",width:100},{label:"已使用奖品数目",prop:"delivered_count",width:120},{label:"剩余奖品数目",prop:"un_delivered_count",width:120},{label:"中奖百分比",prop:"m_calculate_probability",width:120},{label:"干预中奖百分比",prop:"probability_set",width:120},{label:"创建时间",prop:"create_time",sortable:!0,width:105,className:"ph-6"},{label:"启用",prop:"statusTxt",options:{type:"tag",prop:"status"},width:100},{prop:"USER_ACTION",actions:["edit","del"]}],tableData:[],tabLoading:!0}},created:function(){this.getData()},methods:{getData:function(){var n=this;this.tabLoading=!0,i.b.list({lotteryRuleId:this.lotteryRuleId}).then(function(t){t&&(n.tableData=(t||[]).map(function(n){return r.a.merge(n,{un_delivered_count:n.assigned_num-n.delivered_count,m_calculate_probability:(1*n.m_calculate_probability).toFixed(3),probability_set:(1*n.probability_set).toFixed(3),statusTxt:["停用","启用"][n.status],create_time:Object(l.c)(n.create_time)})}),n.totalCount=1*t.totalCount),n.tabLoading=!1})},createLotteryRule:function(){this.$router.push({name:"prizeRuleCreate",query:{lotteryRuleId:this.lotteryRuleId}})},editHandler:function(n){this.$router.push({name:"prizeRuleModify",params:{id:n.id},query:{lotteryRuleId:this.lotteryRuleId}})},deleteHandler:function(n){var t=this;this.$confirm("您确认要删除奖品规则 "+n.prize_name+" 吗?","提示",{type:"warning"}).then(function(){i.b.del(n.id).then(t.getData)}).catch(function(){t.$message({type:"info",message:"已取消删除"})})}}},u={render:function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",{staticClass:"app-container"},[e("div",{staticClass:"control-group mb-20"},[e("el-button",{attrs:{type:"primary"},on:{click:n.createLotteryRule}},[e("i",{staticClass:"el-icon-plus mr-5 fs-13"}),n._v(" 新增\n    ")])],1),n._v(" "),e("custom-el-table",{directives:[{name:"loading",rawName:"v-loading",value:n.tabLoading,expression:"tabLoading"}],attrs:{tableData:n.tableData,tableOptions:n.tableOptions,pagination:!1},on:{edit:n.editHandler,delete:n.deleteHandler}})],1)},staticRenderFns:[]};var d=e("VU/8")(s,u,!1,function(n){e("DqQC")},"data-v-540fc7aa",null);t.default=d.exports},kEwH:function(n,t,e){(n.exports=e("FZ+f")(!1)).push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])}});