webpackJsonp([79],{"261Z":function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=t("XvNa"),l=t("5aCZ"),r=t("QbVN"),m=t("0xDb"),i={name:"templateEditor",components:{uploadPrizeAvatar:r.a,Tinymce:l.a},data:function(){return{pageLoading:!0,action:this.$route.params.id,matchesOptions:[],templateFrm:{articleName:"",type:"1",matches:[],content:"",cover:"",author:"",publish_time:""},frmRules:{articleName:[{required:!0,message:"请输入文章名称"}],type:[{required:!0,message:"请选择跳转类型"}],matches:[{required:!0,message:"请选择所属比赛"}],content:[{required:!0,message:"请输入文章链接"}],author:[{required:!0,message:"请输入文章作者"}],publish_time:[{required:!0,message:"请输入文章日期"}]}}},created:function(){this.getDetail()},methods:{getDetail:function(){var e=this;this.action||this.$router.back(),a.a.matchType().then(function(n){e.matchesOptions=(n.result||[]).map(function(e){return{title:e.matchName,id:e.id}}),e.get_articleDetails()}).catch(function(){e.pageLoading=!1})},get_articleDetails:function(){var e=this;a.a.articleDetails(this.action).then(function(n){e.templateFrm.type=n.type,e.templateFrm.matches=n.match,e.templateFrm.content=n.content,e.templateFrm.cover=n.cover,e.templateFrm.articleName=n.article_name,e.templateFrm.author=n.author,e.templateFrm.publish_time=1*n.publish_time?Object(m.c)(1e3*n.publish_time):"",e.pageLoading=!1}).catch(function(){e.pageLoading=!1})},save:function(){var e=this;this.$refs.templateFrm.validate(function(n){n&&a.a.reviseArticle(e.action,e.templateFrm).then(function(n){e.$router.back()})})}}},o={render:function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.pageLoading,expression:"pageLoading"}],staticClass:"app-container"},[t("el-form",{ref:"templateFrm",attrs:{model:e.templateFrm,rules:e.frmRules,"label-width":"100px"}},[t("el-form-item",{attrs:{prop:"articleName",label:"文章名称"}},[t("el-input",{attrs:{name:"name",clearable:!0,placeholder:"请输入文章名称"},model:{value:e.templateFrm.articleName,callback:function(n){e.$set(e.templateFrm,"articleName",n)},expression:"templateFrm.articleName"}})],1),e._v(" "),t("el-form-item",{attrs:{prop:"type",label:"跳转类型"}},[t("el-radio",{attrs:{label:"1"},model:{value:e.templateFrm.type,callback:function(n){e.$set(e.templateFrm,"type",n)},expression:"templateFrm.type"}},[e._v("普通文章\n      ")]),e._v(" "),t("el-radio",{attrs:{label:"2"},model:{value:e.templateFrm.type,callback:function(n){e.$set(e.templateFrm,"type",n)},expression:"templateFrm.type"}},[e._v("公众号文章\n      ")])],1),e._v(" "),t("el-form-item",{attrs:{prop:"matches",label:"所属比赛"}},[t("el-select",{attrs:{multiple:"",placeholder:"请选择所属比赛"},model:{value:e.templateFrm.matches,callback:function(n){e.$set(e.templateFrm,"matches",n)},expression:"templateFrm.matches"}},e._l(e.matchesOptions,function(e){return t("el-option",{key:e.id,attrs:{label:e.title,value:e.id}})}))],1),e._v(" "),"1"!==e.templateFrm.type?[t("el-form-item",{attrs:{prop:"content",label:"文章链接"}},[t("el-input",{attrs:{name:"content",placeholder:"请输入链接"},model:{value:e.templateFrm.content,callback:function(n){e.$set(e.templateFrm,"content",n)},expression:"templateFrm.content"}})],1)]:[t("el-form-item",{attrs:{prop:"author",label:"文章作者"}},[t("el-input",{attrs:{name:"author",clearable:!0,placeholder:"请输入文章作者"},model:{value:e.templateFrm.author,callback:function(n){e.$set(e.templateFrm,"author",n)},expression:"templateFrm.author"}})],1),e._v(" "),t("el-form-item",{attrs:{prop:"publish_time",label:"文章日期"}},[t("el-date-picker",{attrs:{type:"date",editable:!1,placeholder:"请输入文章日期"},model:{value:e.templateFrm.publish_time,callback:function(n){e.$set(e.templateFrm,"publish_time",n)},expression:"templateFrm.publish_time"}})],1),e._v(" "),t("el-form-item",{attrs:{prop:"content",label:"文章内容"}},[t("tinymce",{attrs:{placeholder:"请输入文章内容",height:300},model:{value:e.templateFrm.content,callback:function(n){e.$set(e.templateFrm,"content",n)},expression:"templateFrm.content"}})],1)],e._v(" "),t("el-form-item",{attrs:{prop:"cover",label:"文章封面(选题)"}},[t("upload-prize-avatar",{model:{value:e.templateFrm.cover,callback:function(n){e.$set(e.templateFrm,"cover",n)},expression:"templateFrm.cover"}})],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),t("el-button",{on:{click:function(n){e.$router.back()}}},[e._v("取消")])],1)],2)],1)},staticRenderFns:[]};var c=t("VU/8")(i,o,!1,function(e){t("qjSb")},null,null);n.default=c.exports},VXkh:function(e,n,t){(e.exports=t("FZ+f")(!1)).push([e.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},qjSb:function(e,n,t){var a=t("VXkh");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("9911ad3c",a,!0)}});