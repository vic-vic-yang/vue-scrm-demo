webpackJsonp([58],{"5qVm":function(e,n,t){var r=t("OVHl");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);t("rjj0")("168317c2",r,!0)},"9X4/":function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("Dd8w"),a=t.n(r),c=t("YK4W"),o=t("aPhD"),i=t("0xDb"),s=t("M4fF"),u=t.n(s),l={name:"writeOffList",components:{customElTable:c.a},data:function(){return{tableOptions:[{label:"序列号",prop:"card_number"},{label:"商品名",prop:"goods_name"},{label:"价格",prop:"goods_price"},{label:"用户",prop:"nickname"},{label:"下单日期",prop:"order_time",sortable:!0,width:105,className:"ph-6"},{label:"有效期",prop:"validate_time",width:145},{label:"核销日期",prop:"check_time",sortable:!0,width:105,className:"ph-6"},{label:"核销人",prop:"check_user_name"}],tableData:[],pageIndex:1,pageSize:20,totalCount:0,tabLoading:!0,recordQueryFrm:{check_user_name:"",card_number:"",time:[]},query:null,pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var n=new Date,t=new Date;t.setTime(t.getTime()-6048e5),e.$emit("pick",[t,n])}},{text:"最近一个月",onClick:function(e){var n=new Date,t=new Date;t.setTime(t.getTime()-2592e6),e.$emit("pick",[t,n])}},{text:"最近三个月",onClick:function(e){var n=new Date,t=new Date;t.setTime(t.getTime()-7776e6),e.$emit("pick",[t,n])}}]}}},created:function(){this.getData()},methods:{getData:function(){var e=this,n=this.query||{};this.tabLoading=!0,o.a.list(a()({page_index:this.pageIndex,page_size:this.pageSize},n)).then(function(n){e.tableData=(n.result||[]).map(function(e){return a()({},e,e.goods_info,e.user_info,{order_time:Object(i.c)(e.create_time),validate_time:Object(i.c)(e.start_time)+"-"+Object(i.c)(e.end_time),check_time:e.check_time>0?Object(i.c)(e.check_time):"--"})}),e.totalCount=1*n.totalCount,e.tabLoading=!1}).catch(function(){e.tabLoading=!1})},searchRecordList:function(){this.query=u.a.cloneDeep(this.recordQueryFrm);var e=this.query.time||[];this.$set(this.query,"start_time",e[0]||""),this.$set(this.query,"end_time",e[1]||""),this.$delete(this.query,"time"),this.pageIndex=1,this.getData()},sizeChangeHandler:function(e){this.pageSize=e,this.pageIndex=1,this.getData()},pageChangeHandler:function(e){this.pageIndex=e,this.getData()},resetForm:function(e){this.$refs[e].resetFields()}}},d={render:function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"app-container"},[t("div",{staticClass:"control-group"},[t("el-form",{ref:"recordQueryFrm",attrs:{inline:!0,model:e.recordQueryFrm}},[t("el-form-item",{attrs:{prop:"check_user_name",label:"核销员"}},[t("el-input",{attrs:{placeholder:"核销员名称"},model:{value:e.recordQueryFrm.check_user_name,callback:function(n){e.$set(e.recordQueryFrm,"check_user_name",n)},expression:"recordQueryFrm.check_user_name"}})],1),e._v(" "),t("el-form-item",{attrs:{prop:"card_number",label:"卡券序列号"}},[t("el-input",{attrs:{placeholder:"卡券序列号"},model:{value:e.recordQueryFrm.card_number,callback:function(n){e.$set(e.recordQueryFrm,"card_number",n)},expression:"recordQueryFrm.card_number"}})],1),e._v(" "),t("el-form-item",{attrs:{prop:"time",label:"核销时间"}},[t("el-date-picker",{attrs:{editable:!1,type:"datetimerange","picker-options":e.pickerOptions,"range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间","value-format":"yyyy-MM-dd HH:mm:ss",align:"right"},model:{value:e.recordQueryFrm.time,callback:function(n){e.$set(e.recordQueryFrm,"time",n)},expression:"recordQueryFrm.time"}})],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.searchRecordList}},[e._v("查询")]),e._v(" "),t("el-button",{attrs:{icon:"el-icon-refresh"},on:{click:function(n){e.resetForm("recordQueryFrm")}}},[e._v("重置")])],1)],1)],1),e._v(" "),t("custom-el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tabLoading,expression:"tabLoading"}],attrs:{tableData:e.tableData,tableOptions:e.tableOptions,total:e.totalCount},on:{"size-change":e.sizeChangeHandler,"page-change":e.pageChangeHandler},model:{value:e.pageIndex,callback:function(n){e.pageIndex=n},expression:"pageIndex"}})],1)},staticRenderFns:[]};var p=t("VU/8")(l,d,!1,function(e){t("5qVm")},"data-v-df0fedb6",null);n.default=p.exports},OVHl:function(e,n,t){(e.exports=t("FZ+f")(!1)).push([e.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},aPhD:function(e,n,t){"use strict";var r=t("gyMJ");n.a={list:function(e){return r.a.get("/groupBuy/v1/card/card-check/get-list",{params:e}).then(function(e){return e.data})},search:function(e){return r.a.get("/groupBuy/v1/card/card-check/get-one?card_number="+e).then(function(e){return e.data})},check:function(e){return r.a.get("/groupBuy/v1/card/card-check/check?card_number="+e,{autoShowMessage:!0,showMessageType:"put"}).then(function(e){return e.data})},personnel_list:function(e){return r.a.get("/groupBuy/v1/card/card-check-users",{params:e}).then(function(e){return e.data})},personnel_del:function(e){return r.a.delete("/groupBuy/v1/card/card-check-users/"+e.id,{autoShowMessage:!0})},personnel_status:function(e){return r.a.put("/groupBuy/v1/card/card-check-users/"+e.id+"/status/"+e.status,{},{autoShowMessage:!0,showMessageType:"put"})},personnel_get:function(e){return r.a.get("/groupBuy/v1/card/card-check-users/"+e.id).then(function(e){return e.data})},personnel_add:function(e){return r.a.post("/groupBuy/v1/card/card-check-users",e,{autoShowMessage:!0})},personnel_edit:function(e){return r.a.put("/groupBuy/v1/card/card-check-users/{id}",e,{autoShowMessage:!0})}}}});