webpackJsonp([110],{on5P:function(n,e,t){(n.exports=t("FZ+f")(!1)).push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},"t/bH":function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=t("Dd8w"),i=t.n(a),s=t("YK4W"),o=t("xzVI"),r=t("0xDb"),l=t("NYxO"),p=t("M4fF"),m=t.n(p),c={name:"gameList",components:{customElTable:s.a},data:function(){return{tableOptions:[{label:"编号",prop:"id",width:80},{label:"比赛名称",prop:"matchName"},{label:"游戏模式",prop:"matchMode"},{label:"比赛模式",prop:"matchType"},{label:"状态",prop:"statusTxt",options:{type:"tag",prop:"status"},width:120},{label:"开始时间",prop:"startTime",sortable:!0,width:105,className:"ph-6"},{label:"结束时间",prop:"endTime",sortable:!0,width:105,className:"ph-6"},{prop:"USER_ACTION",actions:[{type:"detail",label:"排名"},{type:"name",label:"称号"},{type:"view",label:"界面"},{type:"reward",label:"奖励"},{type:"preposition",label:"前置"},"edit","del"]}],tableData:[],pageIndex:1,pageSize:20,totalCount:0,tabLoading:!0,gameListQueryFrm:{matchName:"",matchMode:"",matchType:"",status:"",time:[]},query:null,preposition:{match_id:"",is_from:0,from:""},prepositionInput:"",prepositionShow:!1,pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(n){var e=new Date,t=new Date;t.setTime(t.getTime()-6048e5),n.$emit("pick",[t,e])}},{text:"最近一个月",onClick:function(n){var e=new Date,t=new Date;t.setTime(t.getTime()-2592e6),n.$emit("pick",[t,e])}},{text:"最近三个月",onClick:function(n){var e=new Date,t=new Date;t.setTime(t.getTime()-7776e6),n.$emit("pick",[t,e])}}]}}},created:function(){this.getData()},computed:i()({},Object(l.c)({matchModeOptions:function(n){return n.game.matchMode},matchTypeOptions:function(n){return n.game.matchType},statusOptions:function(n){return n.game.status}})),methods:{getData:function(){var n=this,e=this.query||{};this.tabLoading=!0,o.a.list(i()({pageIndex:this.pageIndex,pageSize:this.pageSize},e)).then(function(e){n.tableData=(e.result||[]).map(function(e){return i()({},e,{matchMode:n.$store.getters.getMatchMode(e.matchMode),matchType:n.$store.getters.getMatchType(e.matchType),statusTxt:n.$store.getters.getStatusTxt(e.status),startTime:Object(r.c)(e.startTime),endTime:Object(r.c)(e.endTime)})}),n.totalCount=1*e.totalCount,n.tabLoading=!1})},searchGameList:function(){this.query=m.a.cloneDeep(this.gameListQueryFrm);var n="",e="";if(this.query.time&&2===this.query.time.length){var t=this.query.time;n=t[0],e=t[1]}this.$set(this.query,"startTime",n),this.$set(this.query,"endTime",e),this.$delete(this.query,"time"),this.pageIndex=1,this.getData()},createGame:function(){this.$router.push({name:"gameCreate"})},editHandler:function(n){this.$router.push({name:"gameModify",params:{id:n.id}})},deleteHandler:function(n){var e=this;this.$confirm("确认删除比赛 <b>"+n.matchName+"</b> 吗？","删除",{dangerouslyUseHTMLString:!0,confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){o.a.del(n).then(function(){e.getData()})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},actionHandler:function(n,e){var t=this;if("status"===n){var a=this.$store.getters.getStatusTxt(!(1*e.status));this.$confirm("确认"+a+"比赛 <b>"+e.matchName+"</b> 吗？",a,{dangerouslyUseHTMLString:!0,confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){o.a.status(e).then(function(){t.getData()})}).catch(function(){t.$message({type:"info",message:"已取消"+a})})}else"name"===n?this.$router.push({name:"gameNameList",params:{gameId:e.id}}):"detail"===n?this.$router.push({name:"gameDetail",params:{gameId:e.id}}):"view"===n?this.$router.push({name:"gameView",params:{gameId:e.id}}):"reward"===n?this.$router.push({name:"gameReward",params:{gameId:e.id}}):"preposition"===n&&(this.preposition.match_id=e.id,this.preposition.from=e.from,this.preposition.is_from=Boolean(e.is_from),this.prepositionShow=!0)},sizeChangeHandler:function(n){this.pageSize=n,this.pageIndex=1,this.getData()},pageChangeHandler:function(n){this.pageIndex=n,this.getData()},getStatusBtnInfo:function(n){if(!n)return{btn:"danger",label:"禁用"};var e=1*n.status;return{btn:0===e?"primary":"danger",label:this.$store.getters.getStatusTxt(!e)}},addElement:function(){this.prepositionInput&&(this.preposition.from.push(this.prepositionInput),this.prepositionInput="")},handleClose:function(n){this.preposition.from.splice(n,1)},prepositionSave:function(){var n=this;o.a.preposition.add(this.preposition).then(function(e){n.prepositionShow=!1,n.getData()})},resetForm:function(n){this.$refs[n].resetFields()}}},u={render:function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",{staticClass:"app-container"},[t("div",{staticClass:"control-group"},[t("el-form",{ref:"gameListQueryFrm",attrs:{inline:!0,model:n.gameListQueryFrm}},[t("el-form-item",{attrs:{prop:"matchName",label:"比赛名称"}},[t("el-input",{attrs:{placeholder:"比赛名称"},model:{value:n.gameListQueryFrm.matchName,callback:function(e){n.$set(n.gameListQueryFrm,"matchName",e)},expression:"gameListQueryFrm.matchName"}})],1),n._v(" "),t("el-form-item",{attrs:{prop:"matchMode",label:"游戏模式"}},[t("el-select",{attrs:{placeholder:"全部",clearable:""},model:{value:n.gameListQueryFrm.matchMode,callback:function(e){n.$set(n.gameListQueryFrm,"matchMode",e)},expression:"gameListQueryFrm.matchMode"}},n._l(n.matchModeOptions,function(n){return t("el-option",{key:n.value,attrs:{label:n.label,value:n.value}})}))],1),n._v(" "),t("el-form-item",{attrs:{prop:"matchType",label:"比赛模式"}},[t("el-select",{attrs:{placeholder:"全部",clearable:""},model:{value:n.gameListQueryFrm.matchType,callback:function(e){n.$set(n.gameListQueryFrm,"matchType",e)},expression:"gameListQueryFrm.matchType"}},n._l(n.matchTypeOptions,function(n){return t("el-option",{key:n.value,attrs:{label:n.label,value:n.value}})}))],1),n._v(" "),t("el-form-item",{attrs:{prop:"status",label:"选择状态"}},[t("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:n.gameListQueryFrm.status,callback:function(e){n.$set(n.gameListQueryFrm,"status",e)},expression:"gameListQueryFrm.status"}},n._l(n.statusOptions,function(n){return t("el-option",{key:n.value,attrs:{label:n.label,value:n.value}})}))],1),n._v(" "),t("el-form-item",{attrs:{prop:"time",label:"选择时间"}},[t("el-date-picker",{attrs:{editable:!1,type:"datetimerange","picker-options":n.pickerOptions,"range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间","value-format":"yyyy-MM-dd HH:mm:ss",align:"right"},model:{value:n.gameListQueryFrm.time,callback:function(e){n.$set(n.gameListQueryFrm,"time",e)},expression:"gameListQueryFrm.time"}})],1),n._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:n.searchGameList}},[n._v("查询")]),n._v(" "),t("el-button",{attrs:{icon:"el-icon-refresh"},on:{click:function(e){n.resetForm("gameListQueryFrm")}}},[n._v("重置")])],1),n._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:n.createGame}},[t("i",{staticClass:"fs-13 el-icon-plus mr-5"}),n._v("新增\n        ")])],1)],1)],1),n._v(" "),t("custom-el-table",{directives:[{name:"loading",rawName:"v-loading",value:n.tabLoading,expression:"tabLoading"}],attrs:{tableData:n.tableData,tableOptions:n.tableOptions,total:n.totalCount},on:{edit:n.editHandler,delete:n.deleteHandler,action:n.actionHandler,"size-change":n.sizeChangeHandler,"page-change":n.pageChangeHandler},model:{value:n.pageIndex,callback:function(e){n.pageIndex=e},expression:"pageIndex"}}),n._v(" "),t("el-dialog",{attrs:{title:"前置条件",visible:n.prepositionShow},on:{"update:visible":function(e){n.prepositionShow=e}}},[t("el-form",{attrs:{model:n.preposition}},[t("el-form-item",{attrs:{prop:"is_from",label:"是否需要填写表单"}},[t("el-switch",{attrs:{name:"is_from"},model:{value:n.preposition.is_from,callback:function(e){n.$set(n.preposition,"is_from",e)},expression:"preposition.is_from"}})],1),n._v(" "),1==n.preposition.is_from?[t("el-form-item",{attrs:{prop:"is_from",label:"表单元素"}},n._l(n.preposition.from,function(e,a){return t("el-tag",{key:a,staticStyle:{"margin-left":"10px"},attrs:{closable:""},on:{close:function(e){n.handleClose(a)}}},[n._v("\n            "+n._s(e)+"\n          ")])})),n._v(" "),t("el-form-item",{attrs:{prop:"is_from",label:""}},[t("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"新增元素"},model:{value:n.prepositionInput,callback:function(e){n.prepositionInput=e},expression:"prepositionInput"}}),n._v(" "),t("i",{staticClass:"el-icon-plus",staticStyle:{"font-size":"16px","vertical-align":"middle",cursor:"pointer","font-weight":"bold","margin-left":"15px"},on:{click:n.addElement}})],1)]:n._e()],2),n._v(" "),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(e){n.prepositionShow=!1}}},[n._v("取 消")]),n._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:n.prepositionSave}},[n._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var h=t("VU/8")(c,u,!1,function(n){t("y2BO")},"data-v-3c188ba4",null);e.default=h.exports},y2BO:function(n,e,t){var a=t("on5P");"string"==typeof a&&(a=[[n.i,a,""]]),a.locals&&(n.exports=a.locals);t("rjj0")("4dd42239",a,!0)}});