webpackJsonp([128],{HBxV:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=e("xzVI"),s={name:"",data:function(){return{gameId:this.$route.params.gameId,form:{award_data:[],award_switch:1}}},created:function(){},mounted:function(){this.formFill()},components:{imageUpload:e("g6WS").a},methods:{save:function(t){var a=this,e=this.form,s=!0;if(1===this.form.award_switch){for(var i=this.form.award_data.length,n=0;n<i;n++)if(!this.verify(this.form.award_data[n],!0).status){s=!1;break}}else e.award_data=[];s&&r.a.editReward(this.gameId,this.form).then(function(){a.$router.back()})},deleteImg:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"share_img";this.form[t]=""},verify:function(t){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],e="";return t.start&&t.end&&t.award?t.award.length>16?(e="奖励信息文字不能操过16字",a&&this.$message.error(e),{status:!1,tips:e}):t.remark.length>200?(e="描述文字不能操过200字",a&&this.$message.error(e),{status:!1,tips:e}):{status:!0}:(e="请检查名次与奖励是否填写正确",a&&this.$message.error(e),{status:!1,tips:e})},formFill:function(){var t=this;r.a.getReward(this.gameId).then(function(a){var e={start:"",end:"",award:"",imgUrl:"",remark:""};a.data?(t.form=a.data,a.data.award_data||(t.form.award_data=[e]),null===a.data.award_switch&&(t.form.award_switch=1)):(t.form.award_data=[e],t.form.award_switch=1)})},rewardAdd:function(t){this.verify(this.form.award_data[t],!0).status&&this.form.award_data.push({start:"",end:"",award:"",imgUrl:"",remark:""})},rewardDel:function(t){var a=this;this.$confirm("此操作删除本行奖励配置, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.form.award_data.splice(t,1),a.$message({type:"success",message:"删除成功!"})})}}},i={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"app-container"},[e("el-form",{attrs:{data:t.form}},[e("el-form-item",{staticClass:"rel",attrs:{label:"预估奖励"}},[e("el-tooltip",{staticClass:"item abs",attrs:{effect:"dark",content:"排行榜中是否显示预估奖励",placement:"top-start"}},[e("i",{staticClass:"el-icon-question"})]),t._v(" "),e("el-radio-group",{staticStyle:{width:"500px"},model:{value:t.form.award_switch,callback:function(a){t.$set(t.form,"award_switch",a)},expression:"form.award_switch"}},[e("el-radio",{attrs:{label:0}},[t._v("关")]),t._v(" "),e("el-radio",{attrs:{label:1}},[t._v("开")])],1)],1)],1),t._v(" "),t.form.award_switch&&t.form.award_data&&t.form.award_data.length?e("div",t._l(t.form.award_data,function(a,r){return e("div",{key:r,staticClass:"rewark-item mt-20"},[e("div",[e("el-input",{staticStyle:{width:"120px"},attrs:{type:"number",placeholder:"单行输入"},model:{value:a.start,callback:function(e){t.$set(a,"start",e)},expression:"item.start"}}),t._v(" "),e("span",[t._v("至")]),t._v(" "),e("el-input",{staticStyle:{width:"120px"},attrs:{type:"number",placeholder:"单行输入"},model:{value:a.end,callback:function(e){t.$set(a,"end",e)},expression:"item.end"}}),t._v(" "),e("span",[t._v("名   奖励：")]),t._v(" "),e("el-input",{staticStyle:{width:"120px"},attrs:{placeholder:"单行输入",maxlength:"6"},model:{value:a.award,callback:function(e){t.$set(a,"award",e)},expression:"item.award"}})],1),t._v(" "),e("image-upload",{staticClass:"mt-8",model:{value:a.imgUrl,callback:function(e){t.$set(a,"imgUrl",e)},expression:"item.imgUrl"}}),t._v(" "),e("el-input",{staticClass:"mt-8",staticStyle:{width:"350px"},attrs:{type:"textarea",placeholder:"多行输入",rows:"6"},model:{value:a.remark,callback:function(e){t.$set(a,"remark",e)},expression:"item.remark"}}),t._v(" "),r===t.form.award_data.length-1?e("span",{staticClass:"gtextbtn",on:{click:function(a){t.rewardAdd(r)}}},[t._v("添加")]):t._e(),t._v(" "),r>0||0===r&&t.form.award_data.length>1?e("span",{staticClass:"gtextbtn__del",on:{click:function(a){t.rewardDel(r)}}},[t._v("删除")]):t._e()],1)})):t._e(),t._v(" "),e("div",{staticClass:"mt-20"},[e("el-button",{attrs:{type:"primary"},on:{click:function(a){t.save()}}},[t._v("保存")]),t._v(" "),e("el-button",{on:{click:function(a){t.$router.back()}}},[t._v("取消")])],1)],1)},staticRenderFns:[]};var n=e("VU/8")(s,i,!1,function(t){e("gaN/")},null,null);a.default=n.exports},gLYb:function(t,a,e){(t.exports=e("FZ+f")(!1)).push([t.i,"",""])},"gaN/":function(t,a,e){var r=e("gLYb");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);e("rjj0")("24f69f5a",r,!0)}});