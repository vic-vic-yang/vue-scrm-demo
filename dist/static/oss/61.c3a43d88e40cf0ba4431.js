webpackJsonp([61],{EQT1:function(n,t,e){(n.exports=e("FZ+f")(!1)).push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},"R/BS":function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("Dd8w"),i=e.n(a),s=e("YK4W"),r=e("gmf0"),o=e("0xDb"),c=e("M4fF"),u=e.n(c),l={name:"activityList",components:{customElTable:s.a},data:function(){return{tableOptions:[{label:"编号",prop:"id",width:80},{label:"活动名称",prop:"active_name"},{label:"状态",prop:"active_status_name"},{label:"创建时间",prop:"create_time",sortable:!0,width:105,className:"ph-6"},{prop:"USER_ACTION",actions:["edit",{type:"status",options:this.getStatusBtnInfo},"del",{type:"commodity",label:"查看商品"}]}],tableData:[],pageIndex:1,pageSize:20,totalCount:0,tabLoading:!0,activityQueryFrm:{active_name:"",active_status:0,time:[]},query:null,statusOptions:[{label:"全部",value:0},{label:"未开始",value:1},{label:"进行中",value:2},{label:"结束",value:3},{label:"禁用",value:4}],pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(n){var t=new Date,e=new Date;e.setTime(e.getTime()-6048e5),n.$emit("pick",[e,t])}},{text:"最近一个月",onClick:function(n){var t=new Date,e=new Date;e.setTime(e.getTime()-2592e6),n.$emit("pick",[e,t])}},{text:"最近三个月",onClick:function(n){var t=new Date,e=new Date;e.setTime(e.getTime()-7776e6),n.$emit("pick",[e,t])}}]}}},created:function(){this.getData()},methods:{getData:function(){var n=this,t=this.query||{};this.tabLoading=!0,r.a.list(i()({page_index:this.pageIndex,page_size:this.pageSize},t)).then(function(t){n.tableData=(t.result||[]).map(function(n){return i()({},n,{active_status_name:n.status_info.active_status_name,create_time:1*n.create_time!=0?Object(o.c)(n.create_time):"--"})}),n.totalCount=1*t.totalCount,n.tabLoading=!1})},searchActivityList:function(){this.query=u.a.cloneDeep(this.activityQueryFrm);var n=this.query.time||[];this.$set(this.query,"create_start_time",n[0]||""),this.$set(this.query,"create_end_time",n[1]||""),this.$delete(this.query,"time"),this.pageIndex=1,this.getData()},createActivity:function(){this.$router.push({name:"fightGroupActivityCreate"})},editHandler:function(n){this.$router.push({name:"fightGroupActivityModify",params:{id:n.id}})},deleteHandler:function(n){var t=this,e="确认删除活动 <b>"+n.active_name+"</b> 吗？";1*n.can_delete==1&&(e="有拼团正在进行当中，"+e),this.$confirm(e,"删除",{dangerouslyUseHTMLString:!0,confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){r.a.del(n).then(function(){t.getData()})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},actionHandler:function(n,t){var e=this;if("status"===n){var a=this.getStatusBtnInfo(t).label,i="确认"+a+"活动 <b>"+t.active_name+"</b> 吗？";if(1*t.status==0)1*t.can_disable==1&&(i="有拼团正在进行当中，"+i);else if(1*t.enable_status==2)return this.$alert("活动时间已结束，请编辑后再启用。","提示",{confirmButtonText:"知道了"});this.$confirm(i,a,{dangerouslyUseHTMLString:!0,confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){r.a.status(t).then(function(){e.getData()})}).catch(function(){e.$message({type:"info",message:"已取消"+a})})}else"commodity"===n&&this.$router.push({name:"fightGroupCommodityModify",params:{id:t.goods_id}})},sizeChangeHandler:function(n){this.pageSize=n,this.pageIndex=1,this.getData()},pageChangeHandler:function(n){this.pageIndex=n,this.getData()},getStatusBtnInfo:function(n){return n?0===1*n.status?{btn:"danger",label:"禁用"}:{btn:"primary",label:"启用"}:{btn:"danger",label:"禁用"}},resetForm:function(n){this.$refs[n].resetFields()}}},p={render:function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:n.tabLoading,expression:"tabLoading"}],staticClass:"app-container"},[e("div",{staticClass:"control-group"},[e("el-form",{ref:"activityQueryFrm",attrs:{inline:!0,model:n.activityQueryFrm}},[e("el-form-item",{attrs:{prop:"active_name",label:"活动名称"}},[e("el-input",{attrs:{placeholder:"活动名称"},model:{value:n.activityQueryFrm.active_name,callback:function(t){n.$set(n.activityQueryFrm,"active_name",t)},expression:"activityQueryFrm.active_name"}})],1),n._v(" "),e("el-form-item",{attrs:{prop:"active_status",label:"活动状态"}},[e("el-select",{attrs:{placeholder:"全部",clearable:""},model:{value:n.activityQueryFrm.active_status,callback:function(t){n.$set(n.activityQueryFrm,"active_status",t)},expression:"activityQueryFrm.active_status"}},n._l(n.statusOptions,function(n){return e("el-option",{key:n.value,attrs:{label:n.label,value:n.value}})}))],1),n._v(" "),e("el-form-item",{attrs:{prop:"time",label:"创建时间"}},[e("el-date-picker",{attrs:{editable:!1,type:"datetimerange","picker-options":n.pickerOptions,"range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间","value-format":"yyyy-MM-dd HH:mm:ss",align:"right"},model:{value:n.activityQueryFrm.time,callback:function(t){n.$set(n.activityQueryFrm,"time",t)},expression:"activityQueryFrm.time"}})],1),n._v(" "),e("el-form-item",[e("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:n.searchActivityList}},[n._v("查询")]),n._v(" "),e("el-button",{attrs:{icon:"el-icon-refresh"},on:{click:function(t){n.resetForm("activityQueryFrm")}}},[n._v("重置")])],1),n._v(" "),e("el-form-item",[e("el-button",{attrs:{type:"primary"},on:{click:n.createActivity}},[e("i",{staticClass:"fs-13 el-icon-plus mr-5"}),n._v("新建活动\n        ")])],1)],1)],1),n._v(" "),e("custom-el-table",{directives:[{name:"loading",rawName:"v-loading",value:n.tabLoading,expression:"tabLoading"}],attrs:{tableData:n.tableData,tableOptions:n.tableOptions,total:n.totalCount},on:{edit:n.editHandler,delete:n.deleteHandler,action:n.actionHandler,"size-change":n.sizeChangeHandler,"page-change":n.pageChangeHandler},model:{value:n.pageIndex,callback:function(t){n.pageIndex=t},expression:"pageIndex"}})],1)},staticRenderFns:[]};var d=e("VU/8")(l,p,!1,function(n){e("Xy+h")},"data-v-daa07c30",null);t.default=d.exports},"Xy+h":function(n,t,e){var a=e("EQT1");"string"==typeof a&&(a=[[n.i,a,""]]),a.locals&&(n.exports=a.locals);e("rjj0")("f487c2d0",a,!0)},gmf0:function(n,t,e){"use strict";var a=e("gyMJ");t.a={list:function(n){return a.a.get("/groupBuy/v1/active/active/get-list",{params:n}).then(function(n){return n.data})},del:function(n){return a.a.delete("/groupBuy/v1/active/active/del",{params:{id:n.id},autoShowMessage:!0})},status:function(n){return a.a.post("/groupBuy/v1/active/active/change-status",{id:n.id,status:1*!(1*n.status)},{autoShowMessage:!0,showMessageType:"put"})},get:function(n){return a.a.get("/groupBuy/v1/active/active/get-one?id="+n).then(function(n){return n.data})},add:function(n){return a.a.post("/groupBuy/v1/active/active/add",n,{autoShowMessage:!0})},edit:function(n){return a.a.put("/groupBuy/v1/active/active/edit",n,{autoShowMessage:!0,showMessageType:"put"})},goods:function(n){return a.a.get("/groupBuy/v1/goods/goods/get-active-choose-goods",{params:n}).then(function(n){return n.data})}}}});