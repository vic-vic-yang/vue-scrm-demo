webpackJsonp([139],{gt4i:function(n,t,e){(n.exports=e("FZ+f")(!1)).push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},k87J:function(n,t,e){var a=e("gt4i");"string"==typeof a&&(a=[[n.i,a,""]]),a.locals&&(n.exports=a.locals);e("rjj0")("46fd588f",a,!0)},wBtJ:function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("Dd8w"),i=e.n(a),o=e("YK4W"),s=e("exRc"),r=e("sF3O"),l={name:"blackList",components:{customElTable:o.a},data:function(){return{tabLoading:!0,pageIndex:1,pageSize:20,totalCount:0,type:1,wotks:[],tableData:[],blackListQueryFrm:{activityId:null,nickname:""},wotks_page_info:{pageIndex:1,pageSize:10,totalCount:1},tableOptions:[{label:"编号",prop:"id",width:120},{label:"活动",prop:"activity_name"},{label:"姓名",prop:"user_name"},{label:"微信昵称",prop:"nickname"},{label:"手机号码",prop:"phone_number"},{prop:"USER_ACTION",actions:[{label:"解除黑名单",type:"remove"}]}],frmRules:{activity_id:[{required:!0,message:"请选择活动"}],nickname:[{required:!0,message:"请输入微信昵称"}]}}},created:function(){this.getWorks(),this.getData()},methods:{getData:function(){var n=this;this.tabLoading=!0;var t="signUp";2===this.type?t="works":3===this.type&&(t="comment"),s.a[t].blackList(i()({pageIndex:this.pageIndex,pageSize:this.pageSize},this.blackListQueryFrm)).then(function(t){n.tableData=t.result,n.totalCount=1*t.totalCount,n.tabLoading=!1}).catch(function(){n.tabLoading=!1})},getWorks:function(){var n=this;r.a.activity.list({pageIndex:this.wotks_page_info.pageIndex,pageSize:this.wotks_page_info.pageSize}).then(function(t){n.wotks_page_info={pageIndex:1*t.pageIndex,pageSize:1*t.pageSize,totalCount:1*t.totalCount},n.wotks=t.result.map(function(n){return i()({},n,{id:parseInt(n.id)})})})},searchType:function(){this.pageIndex=1,this.totalCount=0,this.getData()},searchBlackList:function(){this.getData()},actionHandler:function(n,t){var e=this;"remove"===n&&this.$confirm("确认将 <b>"+t.nickname+"</b> 移除黑名单吗？","移除",{dangerouslyUseHTMLString:!0,confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var n="signUp";2===e.type?n="works":3===e.type&&(n="comment"),s.a[n].del(t.id).then(function(){e.getData()})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},currentChangeActivity:function(n){this.wotks_page_info.pageIndex=n,this.getWorks()},sizeChangeHandler:function(n){this.pageSize=n,this.pageIndex=1,this.getData()},pageChangeHandler:function(n){this.pageIndex=n,this.getData()}}},c={render:function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",{staticClass:"app-container"},[e("div",{staticClass:"control-group"},[e("el-form",{attrs:{inline:!0,model:n.blackListQueryFrm}},[e("el-form-item",{attrs:{prop:"type"}},[e("el-radio-group",{staticStyle:{width:"400px"},on:{change:n.searchType},model:{value:n.type,callback:function(t){n.type=t},expression:"type"}},[e("el-radio",{attrs:{label:1}},[n._v("报名黑名单")]),n._v(" "),e("el-radio",{attrs:{label:2}},[n._v("作品黑名单")]),n._v(" "),e("el-radio",{attrs:{label:3}},[n._v("评论黑民单")])],1)],1),n._v(" "),e("el-form-item",{attrs:{prop:"activity_id",label:"活动名称"}},[e("el-select",{attrs:{placeholder:"请选择活动名称"},model:{value:n.blackListQueryFrm.activityId,callback:function(t){n.$set(n.blackListQueryFrm,"activityId",t)},expression:"blackListQueryFrm.activityId"}},[n._l(n.wotks,function(n){return e("el-option",{key:n.id,attrs:{label:n.activity_name,value:n.id}})}),n._v(" "),e("div",{staticClass:"article_pages"},[e("el-pagination",{attrs:{"page-size":n.wotks_page_info.pageSize,"pager-count":Math.ceil(n.wotks_page_info.totalCount/n.wotks_page_info.pageSize),"current-page":n.wotks_page_info.pageIndex,layout:"prev, pager, next",total:n.wotks_page_info.totalCount},on:{"current-change":n.currentChangeActivity}})],1)],2)],1),n._v(" "),e("el-form-item",{attrs:{prop:"nickname",label:"微信昵称"}},[e("el-input",{attrs:{placeholder:"活动名称"},model:{value:n.blackListQueryFrm.nickname,callback:function(t){n.$set(n.blackListQueryFrm,"nickname",t)},expression:"blackListQueryFrm.nickname"}})],1),n._v(" "),e("el-form-item",[e("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:n.searchBlackList}},[n._v("查询")])],1)],1)],1),n._v(" "),e("custom-el-table",{directives:[{name:"loading",rawName:"v-loading",value:n.tabLoading,expression:"tabLoading"}],attrs:{tableData:n.tableData,tableOptions:n.tableOptions,total:n.totalCount},on:{action:n.actionHandler,"size-change":n.sizeChangeHandler,"page-change":n.pageChangeHandler},model:{value:n.pageIndex,callback:function(t){n.pageIndex=t},expression:"pageIndex"}})],1)},staticRenderFns:[]};var p=e("VU/8")(l,c,!1,function(n){e("k87J")},"data-v-0096b81a",null);t.default=p.exports}});